<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Fernando Rios-Avila">
<meta name="dcterms.date" content="2024-08-06">
<meta name="description" content="A brief introduction to Graphs production in Stata">

<title>Stata Crash Course: Graphs and EDA – Playing With Stata</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-GNMLZDYJ2P"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-GNMLZDYJ2P', { 'anonymize_ip': true});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>



<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>



</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Playing With Stata</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv.html"> 
<span class="menu-text">my CV and Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../software.html"> 
<span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../stataviz/index.html"> 
<span class="menu-text">Stata Viz</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../stata_do/index.html"> 
<span class="menu-text">Stata Do’s Ado’s</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../app_metrics/index.html"> 
<span class="menu-text">Applied econometrics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../chatgpt.html"> 
<span class="menu-text">Odds and Ends</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">about</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Stata Crash Course: Graphs and EDA</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          A brief introduction to Graphs production in Stata
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Stata</div>
                <div class="quarto-category">Basics</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Fernando Rios-Avila </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 6, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#why-data-visualization-matters" id="toc-why-data-visualization-matters" class="nav-link" data-scroll-target="#why-data-visualization-matters">Why Data Visualization Matters</a></li>
  <li><a href="#getting-started-with-stata-graphs" id="toc-getting-started-with-stata-graphs" class="nav-link" data-scroll-target="#getting-started-with-stata-graphs">Getting Started with Stata Graphs</a>
  <ul class="collapse">
  <li><a href="#statas-graph-syntax" id="toc-statas-graph-syntax" class="nav-link" data-scroll-target="#statas-graph-syntax">Stata’s Graph Syntax</a></li>
  </ul></li>
  <li><a href="#your-first-stata-graph" id="toc-your-first-stata-graph" class="nav-link" data-scroll-target="#your-first-stata-graph">Your First Stata Graph</a></li>
  </ul></li>
  <li><a href="#graph-types" id="toc-graph-types" class="nav-link" data-scroll-target="#graph-types">Graph Types</a>
  <ul class="collapse">
  <li><a href="#scatter-plots" id="toc-scatter-plots" class="nav-link" data-scroll-target="#scatter-plots">Scatter Plots</a>
  <ul class="collapse">
  <li><a href="#customizing-markers" id="toc-customizing-markers" class="nav-link" data-scroll-target="#customizing-markers">Customizing Markers</a></li>
  <li><a href="#other-interesting-options" id="toc-other-interesting-options" class="nav-link" data-scroll-target="#other-interesting-options">Other interesting options</a></li>
  <li><a href="#advanced-scatter-plot" id="toc-advanced-scatter-plot" class="nav-link" data-scroll-target="#advanced-scatter-plot">Advanced Scatter Plot</a></li>
  <li><a href="#a-different-type-of-scatter-plot" id="toc-a-different-type-of-scatter-plot" class="nav-link" data-scroll-target="#a-different-type-of-scatter-plot">A Different type of scatter Plot</a></li>
  </ul></li>
  <li><a href="#line-plots" id="toc-line-plots" class="nav-link" data-scroll-target="#line-plots">Line Plots</a>
  <ul class="collapse">
  <li><a href="#basic-line-plot" id="toc-basic-line-plot" class="nav-link" data-scroll-target="#basic-line-plot">Basic Line Plot</a></li>
  <li><a href="#customizing-line-styles" id="toc-customizing-line-styles" class="nav-link" data-scroll-target="#customizing-line-styles">Customizing Line Styles</a></li>
  <li><a href="#advanced-customization" id="toc-advanced-customization" class="nav-link" data-scroll-target="#advanced-customization">Advanced Customization</a></li>
  <li><a href="#model-based-line-plot" id="toc-model-based-line-plot" class="nav-link" data-scroll-target="#model-based-line-plot">Model based line plot</a></li>
  </ul></li>
  <li><a href="#histograms-density-plots-and-box-plots" id="toc-histograms-density-plots-and-box-plots" class="nav-link" data-scroll-target="#histograms-density-plots-and-box-plots">Histograms, Density Plots and Box Plots</a>
  <ul class="collapse">
  <li><a href="#histograms" id="toc-histograms" class="nav-link" data-scroll-target="#histograms">Histograms</a></li>
  <li><a href="#basic-histogram" id="toc-basic-histogram" class="nav-link" data-scroll-target="#basic-histogram">Basic Histogram</a></li>
  <li><a href="#overlaying-histograms" id="toc-overlaying-histograms" class="nav-link" data-scroll-target="#overlaying-histograms">Overlaying Histograms</a></li>
  </ul></li>
  <li><a href="#kernel-density-plots" id="toc-kernel-density-plots" class="nav-link" data-scroll-target="#kernel-density-plots">Kernel Density Plots</a>
  <ul class="collapse">
  <li><a href="#basic-kernel-density-plot" id="toc-basic-kernel-density-plot" class="nav-link" data-scroll-target="#basic-kernel-density-plot">Basic Kernel Density Plot</a></li>
  <li><a href="#kernel-densities-and-bandwidth-choice" id="toc-kernel-densities-and-bandwidth-choice" class="nav-link" data-scroll-target="#kernel-densities-and-bandwidth-choice">Kernel Densities and bandwidth choice</a></li>
  <li><a href="#curves-areas-and-overlays" id="toc-curves-areas-and-overlays" class="nav-link" data-scroll-target="#curves-areas-and-overlays">Curves, Areas, and Overlays</a></li>
  </ul></li>
  <li><a href="#range-plots" id="toc-range-plots" class="nav-link" data-scroll-target="#range-plots">Range plots</a>
  <ul class="collapse">
  <li><a href="#ranges-galore" id="toc-ranges-galore" class="nav-link" data-scroll-target="#ranges-galore">Ranges Galore</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>The last part of the series of Stata Basics: Graphs! In this quick tutorial should provide you with a solid foundation for creating high-quality graphs in Stata. Granted, Stata’s graphing capabilities are not as flexible and fast as R or Python, but they are still powerful and can produce almost every type of graph you might need.</p>
<p>But before we start, a brief comment on graphs in Stata. One of the most important things when making good graphs is to choose good colors, and good schemes (or themes). Up to Stata 17, the default color scheme was <code>s2color</code>, which is not the best. In Stata 18, a new color scheme was introduced, which is more visually appealing. Of course, if you have an earlier version of Stata, you may want to consider other options.</p>
<p>So, to get you in the right path, you may want to first get few things installed in your Stata.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>net install palettes , <span class="kw">replace</span> from(<span class="st">"https://raw.githubusercontent.com/benjann/palettes/master/"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>net install colrspace, <span class="kw">replace</span> from(<span class="st">"https://raw.githubusercontent.com/benjann/colrspace/master/"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ssc</span> install grstyle</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ssc</span> install color_style</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code>palette</code> and <code>colrspace</code>, both by Ben Jann, are packages that allow you to easily create colors that can be used as part of your scheme. <code>grstyle</code>, also by Ben Jann, is another small tool that is very useful to make changes in the scheme files.</p>
<p>Finally, a small wrapper of my own design: <code>color_style</code>. This package uses the previous ones for one main purpose. Change the color palettes used in the current scheme. That way, you do not need to make changes manually, and can easily change colors as needed. Now a quick setup:</p>
<div id="78ae9ffd" class="cell" data-outcome="false" data-execution_count="2">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> <span class="dv">scheme</span> white2</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>color_style tableau</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<style>div.jp-Notebook .datagrid-container {min-height: 448px; }</style>
</div>
</div>
<section id="why-data-visualization-matters" class="level2">
<h2 class="anchored" data-anchor-id="why-data-visualization-matters">Why Data Visualization Matters</h2>
<p>Before we start with the guide, a quick word on why data visualization matters the data analysis process:</p>
<ol type="1">
<li><strong>Exploratory Data Analysis (EDA)</strong>: Visualizations help you understand the structure of your data, identify patterns, and spot anomalies or outliers.</li>
<li><strong>Hypothesis Generation</strong>: Graphs can reveal relationships between variables that you might not have anticipated, leading to new research questions.</li>
<li><strong>Communication</strong>: A well-designed graph can show information quickly and effectively to your audience.</li>
<li><strong>Quality Control</strong>: Visualizations can help you identify data quality issues or errors in your analysis.</li>
</ol>
<p>With these benefits in mind, let’s begin!</p>
</section>
<section id="getting-started-with-stata-graphs" class="level2">
<h2 class="anchored" data-anchor-id="getting-started-with-stata-graphs">Getting Started with Stata Graphs</h2>
<p>Before we start making graphs, let’s start with a brief overview of Stata’s graphing syntax and some basic principles.</p>
<section id="statas-graph-syntax" class="level3">
<h3 class="anchored" data-anchor-id="statas-graph-syntax">Stata’s Graph Syntax</h3>
<p>Most Stata graph commands follow a similar structure:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>graph_type y_variable(<span class="fu">s</span>) [x_variable] [<span class="kw">if</span>] [<span class="kw">in</span>] [<span class="kw">weight</span>] [, options]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where: - <code>graph_type</code> is the type of graph you want to create (e.g., scatter, line, bar) - <code>y_variable</code> is typically the dependent variable - <code>x_variable</code> is typically the independent variable - <code>[if]</code> and <code>[in]</code> are optional conditions to subset your data - <code>[weight]</code> is an optional weighting specification - <code>[, options]</code> are additional specifications to customize your graph</p>
<p>In terms of Graph Types, we could possibly classify them into two main categories. you have the <code>two way</code> graphs, and the <code>graph</code> graphs.</p>
<p>The first type are graphs that can be overlaid on top of each other. The second, however, cannot be overlay. In addition to that, most community-contributed commands are typically <code>two way</code> graphs. However, they cannot be <code>overlayed</code> with the official ones. Which Its perhaps the biggest weakness of Stata’s graphical capabilities.</p>
</section>
</section>
<section id="your-first-stata-graph" class="level2">
<h2 class="anchored" data-anchor-id="your-first-stata-graph">Your First Stata Graph</h2>
<p>Let’s create a simple scatter plot to get started. We’ll use the built-in “auto” dataset:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">scatter</span> mpg <span class="kw">weight</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">scatter</span> mpg <span class="kw">weight</span>, <span class="bn">title</span>(<span class="st">"Miles per Gallon vs. Weight"</span>) <span class="co">/// Adds a title</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">xtitle</span>(<span class="st">"Weight (lbs)"</span>) <span class="co">/// label to the x-axis</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">ytitle</span>(<span class="st">"Miles per Gallon"</span>) <span class="co">// and y-axis </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Done!</p>
<p>Now some points to consider. <code>title</code> is important, but often you may want to add a title in your editor, not the figure. Same if you add a note. Otherwise, the above code is a good start.</p>
<p>Also noticed that because of my setup using <code>white2</code> scheme, the background is white, and minimalistic. The colors, from <code>tableau</code> are generally a good choice for most graphs.</p>
<p>Wait, but how does this look like? Let’s see:</p>
<div id="fd50c8a7" class="cell" data-execution_count="3">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">scatter</span> mpg <span class="kw">weight</span>, <span class="bn">title</span>(<span class="st">"Miles per Gallon vs. Weight"</span>) <span class="co">/// Adds a title</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">xtitle</span>(<span class="st">"Weight (lbs)"</span>) <span class="co">/// label to the x-axis</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">ytitle</span>(<span class="st">"Miles per Gallon"</span>) <span class="co">/// and y-axis </span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">scale</span>(1.5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-3-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>From here on, I will produce the figures directly, and you can check the code to reproduce them in your own work.</p>
</section>
</section>
<section id="graph-types" class="level1">
<h1>Graph Types</h1>
<section id="scatter-plots" class="level2">
<h2 class="anchored" data-anchor-id="scatter-plots">Scatter Plots</h2>
<p>Scatter plots, what we just did, its perhaps the most basic plot you will use. They are excellent for visualizing the relationship between two <strong>continuous</strong> variables. They can reveal patterns, correlations, and outliers in your data.</p>
<p>The basic syntax for a scatter plot is:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">scatter</span> [<span class="kw">varlist</span> <span class="fu">y</span>] [xvar] [<span class="kw">if</span>] [<span class="kw">in</span>] [<span class="kw">weight</span>] [, options]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As you may expect, <code>varlist y</code> can be a list of variables, all which will be plotted against <code>xvar</code>. However, I would recommend you to use only one variable at a time.</p>
<p>If multiple variables are required, you can use <code>twoway</code> to overlay them.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">twoway</span> (<span class="kw">scatter</span> [yvar1] [xvar] [<span class="kw">if</span>] [<span class="kw">in</span>] [<span class="kw">weight</span>] [, options]) <span class="co">/// &lt;-first</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">scatter</span> [yvar2] [xvar] [<span class="kw">if</span>] [<span class="kw">in</span>] [<span class="kw">weight</span>] [, options]) <span class="co">// &lt;-second</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Each scatter plot can have its own options, colors, and labels.</p>
<p>For example:</p>
<div id="4c1039ab" class="cell" data-execution_count="4">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">twoway</span> (<span class="kw">scatter</span> mpg <span class="kw">weight</span> <span class="kw">if</span> foreign==0) <span class="co">///</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">scatter</span> mpg <span class="kw">weight</span> <span class="kw">if</span> foreign==1) <span class="co">///</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        , <span class="bn">title</span>(<span class="st">"Miles per Gallon vs. Weight: By foreign"</span>) <span class="co">///</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>          <span class="bn">xtitle</span>(<span class="st">"Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>          <span class="bn">ytitle</span>(<span class="st">"Miles per Gallon"</span>) <span class="co">///</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>          <span class="kw">scale</span>(1.5) <span class="co">///</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>          <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Domestic"</span> 2 <span class="st">"Foreign"</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-4-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Now this plot is combining various features.</p>
<ul>
<li>The <code>twoway</code> command (<code>two</code> for short) is used to overlay the two scatter plots.</li>
<li><code>legend</code> adds a legend to the graph, specifying the order of the labels. In <code>white2</code> scheme, the legend is at the left of the graph.<br>
If you would like to change the position of the legend, you can use <code>position(#)</code>, where <code>#</code> is a number from 1 to 12. You may also want to use <code>cols(#)</code> or <code>rows()</code> to change the layout of the legend.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Domestic"</span> 2 <span class="st">"Foreign"</span>) <span class="bn">position</span>(3) <span class="bn">cols</span>(1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="customizing-markers" class="level3">
<h3 class="anchored" data-anchor-id="customizing-markers">Customizing Markers</h3>
<p>You can change the appearance of the markers using various options, like <code>mcolor()</code>, <code>msymbol()</code>, or <code>msize()</code>. From all of these, I prefer using <code>pstyle()</code> to change the colors, and other options for the size of shape, because <code>pstyle()</code> is connected to the color scheme you are using, and <code>mcolor()</code> for added options like transparency. Lets try this with the previous example:</p>
<div id="14b6dfa1" class="cell" data-execution_count="5">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> auto, <span class="kw">clear</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">twoway</span> (<span class="kw">scatter</span> mpg <span class="kw">weight</span> <span class="kw">if</span> foreign==0, pstyle(p3) msize(2)) <span class="co">///</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>       (<span class="kw">scatter</span> mpg <span class="kw">weight</span> <span class="kw">if</span> foreign==1, pstyle(p5) mcolor(%50)) <span class="co">///</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        , <span class="bn">title</span>(<span class="st">"Miles per Gallon vs. Weight: By foreign"</span>) <span class="co">///</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>          <span class="bn">xtitle</span>(<span class="st">"Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>          <span class="bn">ytitle</span>(<span class="st">"Miles per Gallon"</span>) <span class="co">///</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>          <span class="kw">scale</span>(1.5) <span class="co">///</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>          <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Domestic"</span> 2 <span class="st">"Foreign"</span>) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(1978 automobile data)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-5-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="other-interesting-options" class="level3">
<h3 class="anchored" data-anchor-id="other-interesting-options">Other interesting options</h3>
<p>There are other options you may want to try. For example, <code>mlabel()</code> and <code>mlabsize()</code> to add labels to the points. Just be careful with the size of the labels, as the figure could become very busy. If you try the code below, you will see that the figure is not very informative.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">scatter</span> mpg <span class="kw">weight</span>, <span class="bn">mlabel</span>(make) <span class="co">///</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">mlabsize</span>(tiny)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This adds the car make as a label to each point.</p>
</section>
<section id="advanced-scatter-plot" class="level3">
<h3 class="anchored" data-anchor-id="advanced-scatter-plot">Advanced Scatter Plot</h3>
<p>Let’s combine several elements to create a more informative scatter plot:</p>
<div id="f041dddc" class="cell" data-execution_count="6">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">scatter</span> mpg <span class="kw">weight</span>, mcolor(%30) msize(5) ) <span class="co">///</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mpg <span class="kw">weight</span> <span class="kw">in</span> 1/5,  pstyle(p1) <span class="bn">mlabel</span>(make) <span class="bn">mlabsize</span>(small) ), <span class="co">///</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">title</span>(<span class="st">"MPG vs. Weight"</span>) <span class="co">///</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">subtitle</span>(<span class="st">"1978 Automobile Data"</span>) <span class="co">///</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">xtitle</span>(<span class="st">"Weight (lbs)"</span>) <span class="bn">ytitle</span>(<span class="st">"Miles per Gallon"</span>) <span class="co">///</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                    <span class="kw">note</span>(<span class="st">"Source: Auto dataset"</span>) <span class="co">///</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-6-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This plot includes: - Semi-transparent circles - Labels for few points (car make) - Informative title, subtitle, and axis labels - A note indicating the data source - No legend (turned off) (every time you have more than 1 plot, the legend will be displayed)</p>
</section>
<section id="a-different-type-of-scatter-plot" class="level3">
<h3 class="anchored" data-anchor-id="a-different-type-of-scatter-plot">A Different type of scatter Plot</h3>
<p>While you can always use scatter plot for plotting multiple multiple variables, any now and then you will need a more “brute force approach”, where a large set of variables are plotted at aonce. If you are interested in this, you can use a scatter plot matrix. It has the following syntax:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">graph</span> <span class="fu">matrix</span> [<span class="kw">varlist</span>], [half]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where <code>varlist</code> is a list of variables to be plotted. This will make a matrix of scatter plots for all pairs of the specified variables. The <code>half</code> option will only plot the lower half of the matrix. Of course, such a plot can be very busy, so be careful with the number of variables you include. Here an example:</p>
<div id="4fac8904" class="cell" data-execution_count="7">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">graph</span> <span class="fu">matrix</span> price mpg <span class="kw">weight</span> <span class="fu">length</span>, half <span class="co">///</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xsize</span>(12) <span class="bn">ysize</span>(8) <span class="bn">title</span>(<span class="st">"Scatter Plot Matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-7-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="line-plots" class="level2">
<h2 class="anchored" data-anchor-id="line-plots">Line Plots</h2>
<p>Line plots are the second most common type of plot you will use. They are excellent for visualizing trends over time or another continuous variable.</p>
<p>In general, I would classify them in three types. The basic line plot, and model based line plots.</p>
<p>The basic lineplot is the one that uses all the data to create a plot, going from one coordinate to the next. Think of it as a connect the dots plot. Because of this, the plot can be very different depending on the order of the data.</p>
<p>The model based plot is often more useful, as it uses some univariate model (linear, quadratic, etc) to create the line. This is often more useful, as it can show the trend of the data, without the noise.</p>
<p>Lets start with the basic line plot:</p>
<section id="basic-line-plot" class="level3">
<h3 class="anchored" data-anchor-id="basic-line-plot">Basic Line Plot</h3>
<p>Similar to scatter plots, you can use multiple variables in a line plot, to be plotted against a single variable.</p>
<div id="e0eaf1b9" class="cell" data-execution_count="8">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> uslifeexp, <span class="kw">clear</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">line</span> le_w le_m <span class="fu">year</span>, <span class="co">///</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(Life expectancy <span class="kw">for</span> men and women <span class="bn">over</span> time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(U.S. life expectancy, 1900-1999)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-8-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Which works well, because the data was ordered by year. If i were to order it by Life expectancy, the plot would be very different, bordering non-sensical.</p>
<div id="4d7ef987" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sysuse</span> uslifeexp, <span class="kw">clear</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> le_w</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">line</span> le_w le_m <span class="fu">year</span>, <span class="co">///</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(Life expectancy <span class="kw">for</span> men and women <span class="bn">over</span> time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(U.S. life expectancy, 1900-1999)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-9-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="customizing-line-styles" class="level3">
<h3 class="anchored" data-anchor-id="customizing-line-styles">Customizing Line Styles</h3>
<p>This plot allows for a few customizations. For example, you can change the line style, color, and width:</p>
<div id="ee29b67e" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">line</span> le_w le_m <span class="fu">year</span>, lpattern(solid <span class="kw">dash</span>) <span class="co">///</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>            pstyle(p2 p3) <span class="co">///</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>            lwidth(thick medium) <span class="co">///</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>            <span class="bn">xline</span>(1930/1936, lw(2) lp(solid) lcolor(gs12)) <span class="co">///</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>            <span class="bn">title</span>(Life expectancy <span class="kw">for</span> men and women <span class="bn">over</span> time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-10-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>In addition to the line, I also added some shading for the years 1930 to 1936. Useful if you want to emphasize a particular period.</p>
</section>
<section id="advanced-customization" class="level3">
<h3 class="anchored" data-anchor-id="advanced-customization">Advanced Customization</h3>
<p>As with Scatter plot, and infact most two-way plots, you can customize the plot in many ways.</p>
<div id="ec4a086c" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">line</span> le_w le_m <span class="fu">year</span>, lpattern(solid <span class="kw">dash</span>) <span class="co">///</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                     lcolor(<span class="kw">red</span> <span class="bn">blue</span>) <span class="co">///</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                     lwidth(<span class="bn">medthick</span> medium) <span class="co">///</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>                     <span class="bn">title</span>(<span class="st">"Life Expectancy Trends"</span>) <span class="co">///</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                     <span class="bn">subtitle</span>(<span class="st">"United States, 1900-2000"</span>) <span class="co">///</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                     <span class="bn">xtitle</span>(<span class="st">"Year"</span>) <span class="bn">ytitle</span>(<span class="st">"Life Expectancy (years)"</span>) <span class="co">///</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">ylabel</span>(40(10)80, angle(0)) <span class="co">///</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">xlabel</span>(1900(20)2000) <span class="co">///</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                     <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Women"</span> 2 <span class="st">"Men"</span>)) <span class="co">///</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                     <span class="kw">note</span>(<span class="st">"Source: US Life Expectancy dataset"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-11-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="model-based-line-plot" class="level3">
<h3 class="anchored" data-anchor-id="model-based-line-plot">Model based line plot</h3>
<p>Something that its recommended to use more often are model-based line plots. That means that you are not plotting the data, but the predictions of a model. This is useful to better see patterns when the data is noisy.</p>
<p>Lets use the <code>dui</code> dataset and produce a combination of scatter plot with a line plot. On top of that, we will use confidence intervals. (typically means adding a <code>ci</code> to the command)</p>
<p>Lets see how they look like:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Linear Fit</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Quadratic Fit</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">NonParametric Fit</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="8774ac51" class="cell" data-outcome="false" data-execution_count="12">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">scatter</span> citations fines) <span class="co">///</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    (lfitci citations fines,  fcolor(%40)) , <span class="co">///</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Citations"</span>) <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-12-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="7fb6a64d" class="cell" data-outcome="false" data-execution_count="13">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">scatter</span> citations fines) <span class="co">///</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    (qfitci citations fines,  fcolor(%40)) , <span class="co">///</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Citations"</span>) <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-13-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div id="ebf20d53" class="cell" data-outcome="false" data-execution_count="14">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">scatter</span> citations fines) <span class="co">///</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    (lpolyci citations fines,  fcolor(%40)) , <span class="co">///</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Citations"</span>) <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-14-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="histograms-density-plots-and-box-plots" class="level2">
<h2 class="anchored" data-anchor-id="histograms-density-plots-and-box-plots">Histograms, Density Plots and Box Plots</h2>
<p>When it comes to visualizing the distribution of a single variable, your main options are histograms, density plots, and box plots. Histograms and <code>kdensity</code> plots are both <code>twoway</code> plots that can be overlayed. Box plots, however, are <code>graph</code> plots, and are a bit more temperamental.</p>
<section id="histograms" class="level3">
<h3 class="anchored" data-anchor-id="histograms">Histograms</h3>
<p>The first command we will see is the <code>histogram</code> command. This command is used to create histograms, which are bar charts that show the frequency distribution of a single variable.</p>
<p>In contrast with frequency tables, where you need to define the bins width or number of bins, histograms will do this for you. Not always in the best way, but it will do it.</p>
<p>The basic syntax for a histogram is:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">histogram</span> [varname] [<span class="kw">if</span>] [<span class="kw">in</span>] [<span class="kw">weight</span>] [, options]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Perhaps the biggest complain I have about histograms is that they do not allow for aweights. So if your weights are fractional, you may need to consider other works around.</p>
<p>Lets see how this works</p>
</section>
<section id="basic-histogram" class="level3">
<h3 class="anchored" data-anchor-id="basic-histogram">Basic Histogram</h3>
<p>The basic histogram plot will try to produce densities on the y-axis. It usually labels it correctly.</p>
<p>You can, however, request <code>frequency</code> or <code>percent</code> on the y-axis.</p>
<div id="a8eaa820" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="kw">histogram</span> fines, <span class="co">///</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Histogram of Fines"</span>) <span class="co">///</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)
(bin=22, start=7.4000001, width=.2090909)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-15-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>By default, histogram will calculate the number of bins for you. However, you can specify the number of bins using the <code>bin()</code> option. Alternatively, you can use <code>width()</code> instead, making it either more or less granular.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Wider Width()</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Narrower Width()</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div id="0eb8780e" class="cell" data-execution_count="16">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">histogram</span> fines, <span class="co">///</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Histogram of Fines"</span>) <span class="co">///</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="kw">width</span>(.4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(bin=12, start=7.4000001, width=.4)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-16-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div id="8d715ed3" class="cell" data-execution_count="17">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">histogram</span> fines, <span class="co">///</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Histogram of Fines"</span>) <span class="co">///</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="kw">width</span>(.1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(bin=46, start=7.4000001, width=.1)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-17-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Wider bins will make the plot more general, but you lose some of the detail. Narrower bins will make the plot more detailed, but you may lose the overall picture. Its the classic bias-variance tradeoff.</p>
</section>
<section id="overlaying-histograms" class="level3">
<h3 class="anchored" data-anchor-id="overlaying-histograms">Overlaying Histograms</h3>
<p>As mentioned before, because histograms are <code>twoway</code> plots, you can overlay them. This is useful when you want to compare the distribution of a variable across different groups (Low number of groups). Note that by default, histograms come with just one color, but you can change this using the <code>pstyle()</code> option.</p>
<p>You may want to use transparency to make the plot more readable. and even use other options to make the plot visually appealing.</p>
<p>For the last example, I will also use a <code>global</code> to pass options that are common to all subplots.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Simple Overlap</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">With Transparency</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Fixing widths</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div id="ab0176e4" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==1, pstyle(p1)) <span class="co">///</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==2, pstyle(p2)) <span class="co">///</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==3, pstyle(p3)) , <span class="co">///</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Histogram of citations"</span>) <span class="co">///</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">"By city Size"</span>) <span class="co">///</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="co">///</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Small"</span> 2 <span class="st">"Medium"</span> 3 <span class="st">"Large"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-18-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div id="7e6b6d46" class="cell" data-execution_count="19">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==1, pstyle(p1) <span class="kw">color</span>(%75)) <span class="co">///</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==2, pstyle(p2) <span class="kw">color</span>(%75)) <span class="co">///</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==3, pstyle(p3) <span class="kw">color</span>(%75)), <span class="co">///</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Histogram of citations"</span>) <span class="co">///</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">"By city Size"</span>) <span class="co">///</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="co">///</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Small"</span> 2 <span class="st">"Medium"</span> 3 <span class="st">"Large"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-19-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div id="3cabfd2f" class="cell" data-execution_count="20">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> options <span class="kw">width</span>(3) <span class="bn">start</span>(0) <span class="kw">color</span>(%55)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==1, pstyle(p1) <span class="ot">$options</span>) <span class="co">///</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==2, pstyle(p2) <span class="ot">$options</span>) <span class="co">///</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">histogram</span> citations <span class="kw">if</span> csize==3, pstyle(p3) <span class="ot">$options</span>), <span class="co">///</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Histogram of citations"</span>) <span class="co">///</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">"By city Size"</span>) <span class="co">///</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="co">///</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Small"</span> 2 <span class="st">"Medium"</span> 3 <span class="st">"Large"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-20-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>One more note. Histograms assume your dependent variable is continuous. However, you could also use them as discrete, by simply adding the <code>discrete</code> option. Unless <code>width()</code> is specified, each bar will represent a single value.</p>
</section>
</section>
<section id="kernel-density-plots" class="level2">
<h2 class="anchored" data-anchor-id="kernel-density-plots">Kernel Density Plots</h2>
<p>As mentione before, histograms are a good way to visualize distributions of a single variable. Something that histograms do not do well is provide a smooth estimate of the probability density function. And, in Stata, its not possible to add fractional weights to histograms.</p>
<p>There is, however, another option. Kernel Density Plots. These plots provide a smooth estimate of the probability density function of a variable. As with Histograms, they can be very sensitive to the choice of bandwidth (how smooth or rugged the plot is).</p>
<p>One should also note that Kernel density plots cannot be used to plot distributions of discrete variables, and may provide misleading results if used with data that have constraints, or very relevant modes.</p>
<p>The basic syntax for a kernel density plot is:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">kdensity</span> [varname] [<span class="kw">if</span>] [<span class="kw">in</span>] [<span class="kw">weight</span>] [, options]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And because its a <code>twoway</code> plot, you can overlay them with other plots.</p>
<section id="basic-kernel-density-plot" class="level3">
<h3 class="anchored" data-anchor-id="basic-kernel-density-plot">Basic Kernel Density Plot</h3>
<p>Lets see how this works with the <code>dui</code> dataset.</p>
<div id="7161ad7c" class="cell" data-execution_count="21">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">kdensity</span> citation, <span class="co">///</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Kernel Density Estimate of Citations"</span>) <span class="co">///</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"# of Citations"</span>) <span class="co">///</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="bn">ytitle</span>(<span class="st">"Density"</span>) <span class="kw">scale</span>(1.5) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-21-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Noticed how smooth the plot is. The <code>bwidth</code> was set to 2.31, which is constructed using a rule of thumb. It also uses <code>epanechnikov</code> as the default kernel. While you can change the <code>kernel()</code> function, the default one is “optimal” for most cases. What would be more important is the <code>bwidth()</code> option.</p>
</section>
<section id="kernel-densities-and-bandwidth-choice" class="level3">
<h3 class="anchored" data-anchor-id="kernel-densities-and-bandwidth-choice">Kernel Densities and bandwidth choice</h3>
<p>As mentioned before, the bandwidth is a very important parameter. You can set it manually, with the understanding that a smaller bandwidth will make the plot more rugged, and a larger bandwidth will make it smoother. At the limit (infinite bandwidth), the plot will be a horizontal line, and on the other end, it would look like a histogram (each value its own curve)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Smaller Bandwidth</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Larger Bandwidth</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div id="5dafd4f2" class="cell" data-execution_count="22">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">kdensity</span> citation, <span class="co">///</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Kernel Density Estimate of Citations"</span>) <span class="co">///</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"# of Citations"</span>) <span class="co">///</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="bn">ytitle</span>(<span class="st">"Density"</span>) <span class="kw">scale</span>(1.5) bw(1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-22-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div id="9012add7" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">kdensity</span> citation, <span class="co">///</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Kernel Density Estimate of Citations"</span>) <span class="co">///</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"# of Citations"</span>) <span class="co">///</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="bn">ytitle</span>(<span class="st">"Density"</span>) <span class="kw">scale</span>(1.5) bw(4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-23-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Perhaps of interest to some, the Kernel Density does not estimate the bandwidth for every point of data. Instead, it uses a map of points to reduce the computational burden. Then, simply makes a <code>lineplot</code>. If you want to see the curve for every point in your data, you have to use the <code>at()</code> option.</p>
</section>
<section id="curves-areas-and-overlays" class="level3">
<h3 class="anchored" data-anchor-id="curves-areas-and-overlays">Curves, Areas, and Overlays</h3>
<p>Many of the options you can use with histograms, scatterplots or line plots can also be used with Kernel Density plots. However, I will introduce one that some may find useful: <code>recast</code>. This option allows you to change the plot type from a line to something else. For example, you can use <code>recast(area)</code> to fill the area under the curve.</p>
<div id="65a16c22" class="cell" data-execution_count="24">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> dui, <span class="kw">clear</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">kdensity</span> citation, <span class="co">///</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="bn">title</span>(<span class="st">"Kernel Density Estimate of Citations"</span>) <span class="co">///</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="bn">xtitle</span>(<span class="st">"# of Citations"</span>) <span class="co">///</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="bn">ytitle</span>(<span class="st">"Density"</span>) <span class="kw">scale</span>(1.5) <span class="co">///</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">recast</span>(area) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>(Fictional data on monthly drunk driving citations)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-24-output-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This is not the most effective way of changing the plot type, but does the work if the data is small. With larger datasets, other methods may be more useful.</p>
<p>What about overlaying? We can do that as well, as we did with histograms. Ohh, and in contrast with histograms, you do not need to specify colors, as you did with histograms.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Simple Overlap</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">As an Area</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Adding transparency</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div id="7a322208" class="cell" data-execution_count="25">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> options bw(3)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==1, <span class="ot">$options</span> ) <span class="co">///</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==2, <span class="ot">$options</span> ) <span class="co">///</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==3, <span class="ot">$options</span> ) , <span class="co">///</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"kdensity of citations"</span>) <span class="co">///</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">"By city Size"</span>) <span class="co">///</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="co">///</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Small"</span> 2 <span class="st">"Medium"</span> 3 <span class="st">"Large"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-25-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div id="44363258" class="cell" data-execution_count="26">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> options bw(3) <span class="kw">recast</span>(area  )</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==1, <span class="ot">$options</span> ) <span class="co">///</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==2, <span class="ot">$options</span> ) <span class="co">///</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==3, <span class="ot">$options</span> ) , <span class="co">///</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"kdensity of citations"</span>) <span class="co">///</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">"By city Size"</span>) <span class="co">///</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="co">///</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Small"</span> 2 <span class="st">"Medium"</span> 3 <span class="st">"Large"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-26-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div id="42d36e49" class="cell" data-execution_count="27">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> options bw(3) <span class="kw">recast</span>(area) <span class="kw">color</span>(%50)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==1, <span class="ot">$options</span> ) <span class="co">///</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==2, <span class="ot">$options</span> ) <span class="co">///</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">kdensity</span> citations <span class="kw">if</span> csize==3, <span class="ot">$options</span> ) , <span class="co">///</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"kdensity of citations"</span>) <span class="co">///</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">"By city Size"</span>) <span class="co">///</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Fines in 000$"</span>) <span class="co">///</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"Small"</span> 2 <span class="st">"Medium"</span> 3 <span class="st">"Large"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-27-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Few things to notice here.</p>
<ul>
<li>Because im using less data, the default bandwidth makes a rougher plot. I increase it to 3 to make it smoother.</li>
<li>Since the data by groups have “hard” limits, the plots are cut at the edges.</li>
<li>These plot cannot be used to compare the sizes of the groups, as the area under the curve is the same by definition.</li>
</ul>
</section>
</section>
<section id="range-plots" class="level2">
<h2 class="anchored" data-anchor-id="range-plots">Range plots</h2>
<p>There is a fairly large list of plots that fall under this category. Range plots are mostly used to show, as the name implies, a particular range of values. Perhaps the most common of these would be to show confidence intervals.</p>
<p>They all have a similar syntax:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> range_plot y_lower y_higher x_variable [<span class="kw">if</span>] , [options]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As you can see, the main difference is that you need to specify a lower and upper bound for the y-axis. And, as you can imagine, this will generate a nice rendition of a range.</p>
<p>Perhaps the biggest issue with these plots is that you need to prepare the data beforehand. This is not a big issue.</p>
<p>So lets see how this works:</p>
<section id="ranges-galore" class="level3">
<h3 class="anchored" data-anchor-id="ranges-galore">Ranges Galore</h3>
<p>To show how this type of plots work, I will use the dataset <code>cattaneo2</code>. This dataset contains data for childrens weight at birth, in addition to other relevant information. I will do some data manipulation to create the data I need for the plots</p>
<div id="4a21c2f5" class="cell" data-outcome="false" data-execution_count="28">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">webuse</span> cattaneo2, <span class="kw">clear</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Constrain age of mother</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> mage&lt;18 | mage&gt;35</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Get summary for  Weight at birth</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">// mean and p25 and p75 by age and smoking</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) mean_bweight=bweight <span class="co">///</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>         (p25) p25_bweight=bweight <span class="co">///</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>         (p75) p75_bweight=bweight, <span class="kw">by</span>(mage mbsmoke)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Excerpt from Cattaneo (2010) Journal of Econometrics 155: 138–154)
(488 observations deleted)</code></pre>
</div>
</div>
<p>Now that we have the data, lets create the plot(s). Each one will show the range of weights at birth for different groups of mothers. To add additional information, I will also add the mean “weight at birth” as a scatter plot.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Area</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Bar</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">Spike</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Cap</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-5" role="tab" aria-controls="tabset-6-5" aria-selected="false">CapSym</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div id="865631d6" class="cell" data-execution_count="29">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (rarea p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==0, <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">connect</span>(<span class="ot">l</span>)) , <span class="co">///</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Range of Birth Weight by Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Birth Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">"Note: The shaded area represents the 25th to 75th percentile range"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-29-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div id="b8d8bb0d" class="cell" data-execution_count="30">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (rbar p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==0, <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">connect</span>(<span class="ot">l</span>)) , <span class="co">///</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Range of Birth Weight by Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Birth Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">"Note: The shaded area represents the 25th to 75th percentile range"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-30-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div id="30f2916c" class="cell" data-execution_count="31">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (rspike p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==0, <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">connect</span>(<span class="ot">l</span>)) , <span class="co">///</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Range of Birth Weight by Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Birth Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">"Note: The shaded area represents the 25th to 75th percentile range"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-31-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div id="a3c8d801" class="cell" data-execution_count="32">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (rcap p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==0, <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">connect</span>(<span class="ot">l</span>)) , <span class="co">///</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Range of Birth Weight by Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Birth Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">"Note: The shaded area represents the 25th to 75th percentile range"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-32-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-5-tab">
<div id="c74a66b8" class="cell" data-execution_count="33">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (rcapsym p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==0, <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">connect</span>(<span class="ot">l</span>)) , <span class="co">///</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Range of Birth Weight by Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Birth Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">off</span>) <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">"Note: The shaded area represents the 25th to 75th percentile range"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-33-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>:::</p>
<p>The rest (rscatter, rline and rconnected) are not very useful, as they are just a scatter plot, line plots, or both.</p>
<p>And of course, you can combine them!</p>
<div id="e650436b" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">two</span> (rarea p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==0, pstyle(p1) <span class="kw">connect</span>(<span class="ot">l</span>)) <span class="co">///</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    (rarea p25_bweight p75_bweight mage <span class="kw">if</span> mbsmoke==1, pstyle(p2) <span class="kw">color</span>(%50)) <span class="co">///</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    (<span class="kw">scatter</span> mean_bweight mage <span class="kw">if</span> mbsmoke==1, pstyle(p2) <span class="kw">connect</span>(<span class="ot">l</span>)) , <span class="co">///</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">"Range of Birth Weight by Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="bn">xtitle</span>(<span class="st">"Mother's Age"</span>) <span class="co">///</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="bn">ytitle</span>(<span class="st">"Birth Weight (lbs)"</span>) <span class="co">///</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="bn">legend</span>(<span class="kw">order</span>(1 <span class="st">"NonSmokers"</span> 3 <span class="st">"Smokers"</span>)) <span class="co">///</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">scale</span>(1.4) <span class="co">///</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">"Note: The shaded area represents the 25th to 75th percentile range"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/cell-34-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>This are the most basic, yet most useful plots you will use in your data analysis. There are, however, other types of plots that Stata can produce from the box:</p>
<ul>
<li><code>graph pie</code>: Pie charts</li>
<li><code>graph bar</code>: Bar charts, where the bars can be horizontal or vertical, stacked or unstacked, by groups, which can be used to represent many statistical summaries. (The command itself will generate those summaries)</li>
<li><code>graph dot</code>: Dot plots, which are similar to bar charts but use dots instead of bars. Useful to compare summary statistics with a less cluttered plot. Not to be confused with <code>twoway dot</code>.</li>
</ul>
<p>There are also the <code>pair coordinated</code> plots. Where you provide 4 variables, which indicate the initial and final coordinates of a line. So something to keep in mind.</p>
<p>Other than this, there are many community-contributed commands that can be used to create more complex plots, including my own contributions. For for basic data analysis, the above should be more than enough.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/friosavila\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb61" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Stata Crash Course: Graphs and EDA"</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "A brief introduction to Graphs production in Stata"</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Fernando Rios-Avila"</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "8/6/2024"</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> </span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co">    - Stata</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="co">    - Basics</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="an">draft:</span><span class="co"> false</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="an">cache:</span><span class="co"> true</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="an">freezer:</span><span class="co"> true</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="fu"># Introduction</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>The last part of the series of Stata Basics: Graphs! In this quick tutorial should provide you with a solid foundation for creating high-quality graphs in Stata. Granted, Stata's graphing capabilities are not as flexible and fast as R or Python, but they are still powerful and can produce almost every type of graph you might need.</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>But before we start, a brief comment on graphs in Stata. One of the most important things when making good graphs is to choose good colors, and good schemes (or themes). Up to Stata 17, the default color scheme was <span class="in">`s2color`</span>, which is not the best. In Stata 18, a new color scheme was introduced, which is more visually appealing. Of course, if you have an earlier version of Stata, you may want to consider other options. </span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>So, to get you in the right path, you may want to first get few things installed in your Stata.</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a><span class="in">net install palettes , replace from("https://raw.githubusercontent.com/benjann/palettes/master/")</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a><span class="in">net install colrspace, replace from("https://raw.githubusercontent.com/benjann/colrspace/master/")</span></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="in">ssc install grstyle</span></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a><span class="in">ssc install color_style</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a><span class="in">`palette`</span> and <span class="in">`colrspace`</span>, both by Ben Jann, are packages that allow you to easily create colors that can be used as part of your scheme. <span class="in">`grstyle`</span>, also by Ben Jann, is another small tool that is very useful to make changes in the scheme files.</span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>Finally, a small wrapper of my own design: <span class="in">`color_style`</span>. This package uses the previous ones for one main purpose. Change the color palettes used in the current scheme. That way, you do not need to make changes manually, and can easily change colors as needed. Now a quick setup:</span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a><span class="in">*| outcome: false</span></span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a><span class="in">set scheme white2</span></span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a><span class="in">color_style tableau</span></span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a><span class="fu">## Why Data Visualization Matters</span></span>
<span id="cb61-43"><a href="#cb61-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-44"><a href="#cb61-44" aria-hidden="true" tabindex="-1"></a>Before we start with the guide, a quick word on why data visualization matters the data analysis process:</span>
<span id="cb61-45"><a href="#cb61-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-46"><a href="#cb61-46" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Exploratory Data Analysis (EDA)**: Visualizations help you understand the structure of your data, identify patterns, and spot anomalies or outliers.</span>
<span id="cb61-47"><a href="#cb61-47" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Hypothesis Generation**: Graphs can reveal relationships between variables that you might not have anticipated, leading to new research questions.</span>
<span id="cb61-48"><a href="#cb61-48" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Communication**: A well-designed graph can show information quickly and effectively to your audience.</span>
<span id="cb61-49"><a href="#cb61-49" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>**Quality Control**: Visualizations can help you identify data quality issues or errors in your analysis.</span>
<span id="cb61-50"><a href="#cb61-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-51"><a href="#cb61-51" aria-hidden="true" tabindex="-1"></a>With these benefits in mind, let's begin!</span>
<span id="cb61-52"><a href="#cb61-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-53"><a href="#cb61-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Getting Started with Stata Graphs</span></span>
<span id="cb61-54"><a href="#cb61-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-55"><a href="#cb61-55" aria-hidden="true" tabindex="-1"></a>Before we start making graphs, let's start with a brief overview of Stata's graphing syntax and some basic principles.</span>
<span id="cb61-56"><a href="#cb61-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-57"><a href="#cb61-57" aria-hidden="true" tabindex="-1"></a><span class="fu">### Stata's Graph Syntax</span></span>
<span id="cb61-58"><a href="#cb61-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-59"><a href="#cb61-59" aria-hidden="true" tabindex="-1"></a>Most Stata graph commands follow a similar structure:</span>
<span id="cb61-60"><a href="#cb61-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-61"><a href="#cb61-61" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-62"><a href="#cb61-62" aria-hidden="true" tabindex="-1"></a><span class="in">graph_type y_variable(s) [x_variable] [if] [in] [weight] [, options]</span></span>
<span id="cb61-63"><a href="#cb61-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-64"><a href="#cb61-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-65"><a href="#cb61-65" aria-hidden="true" tabindex="-1"></a>Where:</span>
<span id="cb61-66"><a href="#cb61-66" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`graph_type`</span> is the type of graph you want to create (e.g., scatter, line, bar)</span>
<span id="cb61-67"><a href="#cb61-67" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`y_variable`</span> is typically the dependent variable</span>
<span id="cb61-68"><a href="#cb61-68" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`x_variable`</span> is typically the independent variable</span>
<span id="cb61-69"><a href="#cb61-69" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`[if]`</span> and <span class="in">`[in]`</span> are optional conditions to subset your data</span>
<span id="cb61-70"><a href="#cb61-70" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`[weight]`</span> is an optional weighting specification</span>
<span id="cb61-71"><a href="#cb61-71" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`[, options]`</span> are additional specifications to customize your graph</span>
<span id="cb61-72"><a href="#cb61-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-73"><a href="#cb61-73" aria-hidden="true" tabindex="-1"></a>In terms of Graph Types, we could possibly classify them into two main categories. you have the <span class="in">`two way`</span> graphs, and the <span class="in">`graph`</span> graphs. </span>
<span id="cb61-74"><a href="#cb61-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-75"><a href="#cb61-75" aria-hidden="true" tabindex="-1"></a>The first type are graphs that can be overlaid on top of each other. The second, however, cannot be overlay. In addition to that, most community-contributed commands are typically <span class="in">`two way`</span> graphs. However, they cannot be <span class="in">`overlayed`</span> with the official ones. Which Its perhaps the biggest weakness of Stata's graphical capabilities.</span>
<span id="cb61-76"><a href="#cb61-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-77"><a href="#cb61-77" aria-hidden="true" tabindex="-1"></a><span class="fu">## Your First Stata Graph</span></span>
<span id="cb61-78"><a href="#cb61-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-79"><a href="#cb61-79" aria-hidden="true" tabindex="-1"></a>Let's create a simple scatter plot to get started. We'll use the built-in "auto" dataset:</span>
<span id="cb61-80"><a href="#cb61-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-81"><a href="#cb61-81" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-82"><a href="#cb61-82" aria-hidden="true" tabindex="-1"></a><span class="in">sysuse auto, clear</span></span>
<span id="cb61-83"><a href="#cb61-83" aria-hidden="true" tabindex="-1"></a><span class="in">scatter mpg weight</span></span>
<span id="cb61-84"><a href="#cb61-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-85"><a href="#cb61-85" aria-hidden="true" tabindex="-1"></a><span class="in">scatter mpg weight, title("Miles per Gallon vs. Weight") /// Adds a title</span></span>
<span id="cb61-86"><a href="#cb61-86" aria-hidden="true" tabindex="-1"></a><span class="in">                    xtitle("Weight (lbs)") /// label to the x-axis</span></span>
<span id="cb61-87"><a href="#cb61-87" aria-hidden="true" tabindex="-1"></a><span class="in">                    ytitle("Miles per Gallon") // and y-axis </span></span>
<span id="cb61-88"><a href="#cb61-88" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-89"><a href="#cb61-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-90"><a href="#cb61-90" aria-hidden="true" tabindex="-1"></a>Done! </span>
<span id="cb61-91"><a href="#cb61-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-92"><a href="#cb61-92" aria-hidden="true" tabindex="-1"></a>Now some points to consider. <span class="in">`title`</span> is important, but often you may want to add a title in your editor, not the figure. Same if you add a note. Otherwise, the above code is a good start.</span>
<span id="cb61-93"><a href="#cb61-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-94"><a href="#cb61-94" aria-hidden="true" tabindex="-1"></a>Also noticed that because of my setup using <span class="in">`white2`</span> scheme, the background is white, and minimalistic. The colors, from <span class="in">`tableau`</span> are generally a good choice for most graphs.</span>
<span id="cb61-95"><a href="#cb61-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-96"><a href="#cb61-96" aria-hidden="true" tabindex="-1"></a>Wait, but how does this look like? Let's see:</span>
<span id="cb61-97"><a href="#cb61-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-100"><a href="#cb61-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-101"><a href="#cb61-101" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-102"><a href="#cb61-102" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-103"><a href="#cb61-103" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-104"><a href="#cb61-104" aria-hidden="true" tabindex="-1"></a><span class="in">sysuse auto, clear</span></span>
<span id="cb61-105"><a href="#cb61-105" aria-hidden="true" tabindex="-1"></a><span class="in">scatter mpg weight, title("Miles per Gallon vs. Weight") /// Adds a title</span></span>
<span id="cb61-106"><a href="#cb61-106" aria-hidden="true" tabindex="-1"></a><span class="in">                    xtitle("Weight (lbs)") /// label to the x-axis</span></span>
<span id="cb61-107"><a href="#cb61-107" aria-hidden="true" tabindex="-1"></a><span class="in">                    ytitle("Miles per Gallon") /// and y-axis </span></span>
<span id="cb61-108"><a href="#cb61-108" aria-hidden="true" tabindex="-1"></a><span class="in">                    scale(1.5)</span></span>
<span id="cb61-109"><a href="#cb61-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-110"><a href="#cb61-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-111"><a href="#cb61-111" aria-hidden="true" tabindex="-1"></a>From here on, I will produce the figures directly, and you can check the code to reproduce them in your own work.</span>
<span id="cb61-112"><a href="#cb61-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-113"><a href="#cb61-113" aria-hidden="true" tabindex="-1"></a><span class="fu"># Graph Types</span></span>
<span id="cb61-114"><a href="#cb61-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-115"><a href="#cb61-115" aria-hidden="true" tabindex="-1"></a><span class="fu">## Scatter Plots</span></span>
<span id="cb61-116"><a href="#cb61-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-117"><a href="#cb61-117" aria-hidden="true" tabindex="-1"></a>Scatter plots, what we just did, its perhaps the most basic plot you will use. They are excellent for visualizing the relationship between two **continuous** variables. They can reveal patterns, correlations, and outliers in your data.</span>
<span id="cb61-118"><a href="#cb61-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-119"><a href="#cb61-119" aria-hidden="true" tabindex="-1"></a>The basic syntax for a scatter plot is:</span>
<span id="cb61-120"><a href="#cb61-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-121"><a href="#cb61-121" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-122"><a href="#cb61-122" aria-hidden="true" tabindex="-1"></a><span class="in">scatter [varlist y] [xvar] [if] [in] [weight] [, options]</span></span>
<span id="cb61-123"><a href="#cb61-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-124"><a href="#cb61-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-125"><a href="#cb61-125" aria-hidden="true" tabindex="-1"></a>As you may expect, <span class="in">`varlist y`</span> can be a list of variables, all which will be plotted against <span class="in">`xvar`</span>. However, I would recommend you to use only one variable at a time. </span>
<span id="cb61-126"><a href="#cb61-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-127"><a href="#cb61-127" aria-hidden="true" tabindex="-1"></a>If multiple variables are required, you can use <span class="in">`twoway`</span> to overlay them.</span>
<span id="cb61-128"><a href="#cb61-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-129"><a href="#cb61-129" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-130"><a href="#cb61-130" aria-hidden="true" tabindex="-1"></a><span class="in">twoway (scatter [yvar1] [xvar] [if] [in] [weight] [, options]) /// &lt;-first</span></span>
<span id="cb61-131"><a href="#cb61-131" aria-hidden="true" tabindex="-1"></a><span class="in">       (scatter [yvar2] [xvar] [if] [in] [weight] [, options]) // &lt;-second</span></span>
<span id="cb61-132"><a href="#cb61-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-133"><a href="#cb61-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-134"><a href="#cb61-134" aria-hidden="true" tabindex="-1"></a>Each scatter plot can have its own options, colors, and labels.</span>
<span id="cb61-135"><a href="#cb61-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-136"><a href="#cb61-136" aria-hidden="true" tabindex="-1"></a>For example:</span>
<span id="cb61-137"><a href="#cb61-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-140"><a href="#cb61-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-141"><a href="#cb61-141" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-142"><a href="#cb61-142" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-143"><a href="#cb61-143" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-144"><a href="#cb61-144" aria-hidden="true" tabindex="-1"></a><span class="in">sysuse auto, clear</span></span>
<span id="cb61-145"><a href="#cb61-145" aria-hidden="true" tabindex="-1"></a><span class="in">twoway (scatter mpg weight if foreign==0) ///</span></span>
<span id="cb61-146"><a href="#cb61-146" aria-hidden="true" tabindex="-1"></a><span class="in">       (scatter mpg weight if foreign==1) ///</span></span>
<span id="cb61-147"><a href="#cb61-147" aria-hidden="true" tabindex="-1"></a><span class="in">        , title("Miles per Gallon vs. Weight: By foreign") ///</span></span>
<span id="cb61-148"><a href="#cb61-148" aria-hidden="true" tabindex="-1"></a><span class="in">          xtitle("Weight (lbs)") ///</span></span>
<span id="cb61-149"><a href="#cb61-149" aria-hidden="true" tabindex="-1"></a><span class="in">          ytitle("Miles per Gallon") ///</span></span>
<span id="cb61-150"><a href="#cb61-150" aria-hidden="true" tabindex="-1"></a><span class="in">          scale(1.5) ///</span></span>
<span id="cb61-151"><a href="#cb61-151" aria-hidden="true" tabindex="-1"></a><span class="in">          legend(order(1 "Domestic" 2 "Foreign") )</span></span>
<span id="cb61-152"><a href="#cb61-152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-153"><a href="#cb61-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-154"><a href="#cb61-154" aria-hidden="true" tabindex="-1"></a>Now this plot is combining various features. </span>
<span id="cb61-155"><a href="#cb61-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-156"><a href="#cb61-156" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The <span class="in">`twoway`</span> command (<span class="in">`two`</span> for short) is used to overlay the two scatter plots.</span>
<span id="cb61-157"><a href="#cb61-157" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`legend`</span> adds a legend to the graph, specifying the order of the labels. In <span class="in">`white2`</span> scheme, the legend is at the left of the graph.  </span>
<span id="cb61-158"><a href="#cb61-158" aria-hidden="true" tabindex="-1"></a>  If you would like to change the position of the legend, you can use <span class="in">`position(#)`</span>, where <span class="in">`#`</span> is a number from 1 to 12. You may also want to use <span class="in">`cols(#)`</span> or <span class="in">`rows()`</span> to change the layout of the legend.</span>
<span id="cb61-159"><a href="#cb61-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-160"><a href="#cb61-160" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-161"><a href="#cb61-161" aria-hidden="true" tabindex="-1"></a><span class="in">legend(order(1 "Domestic" 2 "Foreign") position(3) cols(1))</span></span>
<span id="cb61-162"><a href="#cb61-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-163"><a href="#cb61-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-164"><a href="#cb61-164" aria-hidden="true" tabindex="-1"></a><span class="fu">### Customizing Markers</span></span>
<span id="cb61-165"><a href="#cb61-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-166"><a href="#cb61-166" aria-hidden="true" tabindex="-1"></a>You can change the appearance of the markers using various options, like <span class="in">`mcolor()`</span>, <span class="in">`msymbol()`</span>, or <span class="in">`msize()`</span>. From all of these, I prefer using <span class="in">`pstyle()`</span> to change the colors, and other options for the size of shape, because <span class="in">`pstyle()`</span> is connected to the color scheme you are using, and <span class="in">`mcolor()`</span> for added options like transparency. Lets try this with the previous example:</span>
<span id="cb61-167"><a href="#cb61-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-170"><a href="#cb61-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-171"><a href="#cb61-171" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-172"><a href="#cb61-172" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-173"><a href="#cb61-173" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-174"><a href="#cb61-174" aria-hidden="true" tabindex="-1"></a><span class="in">sysuse auto, clear</span></span>
<span id="cb61-175"><a href="#cb61-175" aria-hidden="true" tabindex="-1"></a><span class="in">twoway (scatter mpg weight if foreign==0, pstyle(p3) msize(2)) ///</span></span>
<span id="cb61-176"><a href="#cb61-176" aria-hidden="true" tabindex="-1"></a><span class="in">       (scatter mpg weight if foreign==1, pstyle(p5) mcolor(%50)) ///</span></span>
<span id="cb61-177"><a href="#cb61-177" aria-hidden="true" tabindex="-1"></a><span class="in">        , title("Miles per Gallon vs. Weight: By foreign") ///</span></span>
<span id="cb61-178"><a href="#cb61-178" aria-hidden="true" tabindex="-1"></a><span class="in">          xtitle("Weight (lbs)") ///</span></span>
<span id="cb61-179"><a href="#cb61-179" aria-hidden="true" tabindex="-1"></a><span class="in">          ytitle("Miles per Gallon") ///</span></span>
<span id="cb61-180"><a href="#cb61-180" aria-hidden="true" tabindex="-1"></a><span class="in">          scale(1.5) ///</span></span>
<span id="cb61-181"><a href="#cb61-181" aria-hidden="true" tabindex="-1"></a><span class="in">          legend(order(1 "Domestic" 2 "Foreign") )</span></span>
<span id="cb61-182"><a href="#cb61-182" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-183"><a href="#cb61-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-184"><a href="#cb61-184" aria-hidden="true" tabindex="-1"></a><span class="fu">### Other interesting options</span></span>
<span id="cb61-185"><a href="#cb61-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-186"><a href="#cb61-186" aria-hidden="true" tabindex="-1"></a>There are other options you may want to try. For example, <span class="in">`mlabel()`</span> and <span class="in">`mlabsize()`</span> to add labels to the points. Just be careful with the size of the labels, as the figure could become very busy. If you try the code below, you will see that the figure is not very informative.</span>
<span id="cb61-187"><a href="#cb61-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-188"><a href="#cb61-188" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-189"><a href="#cb61-189" aria-hidden="true" tabindex="-1"></a><span class="in">scatter mpg weight, mlabel(make) ///</span></span>
<span id="cb61-190"><a href="#cb61-190" aria-hidden="true" tabindex="-1"></a><span class="in">                    mlabsize(tiny)</span></span>
<span id="cb61-191"><a href="#cb61-191" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-192"><a href="#cb61-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-193"><a href="#cb61-193" aria-hidden="true" tabindex="-1"></a>This adds the car make as a label to each point.</span>
<span id="cb61-194"><a href="#cb61-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-195"><a href="#cb61-195" aria-hidden="true" tabindex="-1"></a><span class="fu">### Advanced Scatter Plot</span></span>
<span id="cb61-196"><a href="#cb61-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-197"><a href="#cb61-197" aria-hidden="true" tabindex="-1"></a>Let's combine several elements to create a more informative scatter plot:</span>
<span id="cb61-198"><a href="#cb61-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-201"><a href="#cb61-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-202"><a href="#cb61-202" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-203"><a href="#cb61-203" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-204"><a href="#cb61-204" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-205"><a href="#cb61-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-206"><a href="#cb61-206" aria-hidden="true" tabindex="-1"></a><span class="in">two (scatter mpg weight, mcolor(%30) msize(5) ) ///</span></span>
<span id="cb61-207"><a href="#cb61-207" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mpg weight in 1/5,  pstyle(p1) mlabel(make) mlabsize(small) ), ///</span></span>
<span id="cb61-208"><a href="#cb61-208" aria-hidden="true" tabindex="-1"></a><span class="in">                    title("MPG vs. Weight") ///</span></span>
<span id="cb61-209"><a href="#cb61-209" aria-hidden="true" tabindex="-1"></a><span class="in">                    subtitle("1978 Automobile Data") ///</span></span>
<span id="cb61-210"><a href="#cb61-210" aria-hidden="true" tabindex="-1"></a><span class="in">                    xtitle("Weight (lbs)") ytitle("Miles per Gallon") ///</span></span>
<span id="cb61-211"><a href="#cb61-211" aria-hidden="true" tabindex="-1"></a><span class="in">                    note("Source: Auto dataset") ///</span></span>
<span id="cb61-212"><a href="#cb61-212" aria-hidden="true" tabindex="-1"></a><span class="in">                    legend(off) scale(1.4)</span></span>
<span id="cb61-213"><a href="#cb61-213" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-214"><a href="#cb61-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-215"><a href="#cb61-215" aria-hidden="true" tabindex="-1"></a>This plot includes:</span>
<span id="cb61-216"><a href="#cb61-216" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Semi-transparent circles</span>
<span id="cb61-217"><a href="#cb61-217" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Labels for few points (car make)</span>
<span id="cb61-218"><a href="#cb61-218" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Informative title, subtitle, and axis labels</span>
<span id="cb61-219"><a href="#cb61-219" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>A note indicating the data source</span>
<span id="cb61-220"><a href="#cb61-220" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>No legend (turned off) (every time you have more than 1 plot, the legend will be displayed)</span>
<span id="cb61-221"><a href="#cb61-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-222"><a href="#cb61-222" aria-hidden="true" tabindex="-1"></a><span class="fu">### A Different type of scatter Plot</span></span>
<span id="cb61-223"><a href="#cb61-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-224"><a href="#cb61-224" aria-hidden="true" tabindex="-1"></a>While you can always use scatter plot for plotting multiple  multiple variables, any now and then you will need a more "brute force approach", where a large set of variables are plotted at aonce. If you are interested in this, you can use a scatter plot matrix. It has the following syntax:</span>
<span id="cb61-225"><a href="#cb61-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-226"><a href="#cb61-226" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-227"><a href="#cb61-227" aria-hidden="true" tabindex="-1"></a><span class="in">graph matrix [varlist], [half]</span></span>
<span id="cb61-228"><a href="#cb61-228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-229"><a href="#cb61-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-230"><a href="#cb61-230" aria-hidden="true" tabindex="-1"></a>Where <span class="in">`varlist`</span> is a list of variables to be plotted. This will make a matrix of scatter plots for all pairs of the specified variables. The <span class="in">`half`</span> option will only plot the lower half of the matrix. Of course, such a plot can be very busy, so be careful with the number of variables you include. Here an example:</span>
<span id="cb61-231"><a href="#cb61-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-234"><a href="#cb61-234" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-235"><a href="#cb61-235" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-236"><a href="#cb61-236" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-237"><a href="#cb61-237" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-238"><a href="#cb61-238" aria-hidden="true" tabindex="-1"></a><span class="in">graph matrix price mpg weight length, half ///</span></span>
<span id="cb61-239"><a href="#cb61-239" aria-hidden="true" tabindex="-1"></a><span class="in">  xsize(12) ysize(8) title("Scatter Plot Matrix")</span></span>
<span id="cb61-240"><a href="#cb61-240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-241"><a href="#cb61-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-242"><a href="#cb61-242" aria-hidden="true" tabindex="-1"></a><span class="fu">## Line Plots</span></span>
<span id="cb61-243"><a href="#cb61-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-244"><a href="#cb61-244" aria-hidden="true" tabindex="-1"></a>Line plots are the second most common type of plot you will use. They are excellent for visualizing trends over time or another continuous variable. </span>
<span id="cb61-245"><a href="#cb61-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-246"><a href="#cb61-246" aria-hidden="true" tabindex="-1"></a>In general, I would classify them in three types. The basic line plot, and model based line plots. </span>
<span id="cb61-247"><a href="#cb61-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-248"><a href="#cb61-248" aria-hidden="true" tabindex="-1"></a>The basic lineplot is the one that uses all the data to create a plot, going from one coordinate to the next. Think of it as a connect the dots plot. Because of this, the plot can be very different depending on the order of the data.</span>
<span id="cb61-249"><a href="#cb61-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-250"><a href="#cb61-250" aria-hidden="true" tabindex="-1"></a>The model based plot is often more useful, as it uses some univariate model (linear, quadratic, etc) to create the line. This is often more useful, as it can show the trend of the data, without the noise.</span>
<span id="cb61-251"><a href="#cb61-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-252"><a href="#cb61-252" aria-hidden="true" tabindex="-1"></a>Lets start with the basic line plot:</span>
<span id="cb61-253"><a href="#cb61-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-254"><a href="#cb61-254" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic Line Plot</span></span>
<span id="cb61-255"><a href="#cb61-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-256"><a href="#cb61-256" aria-hidden="true" tabindex="-1"></a>Similar to scatter plots, you can use multiple variables in a line plot, to be plotted against a single variable. </span>
<span id="cb61-257"><a href="#cb61-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-260"><a href="#cb61-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-261"><a href="#cb61-261" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-262"><a href="#cb61-262" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-263"><a href="#cb61-263" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-264"><a href="#cb61-264" aria-hidden="true" tabindex="-1"></a><span class="in">sysuse uslifeexp, clear</span></span>
<span id="cb61-265"><a href="#cb61-265" aria-hidden="true" tabindex="-1"></a><span class="in">line le_w le_m year, ///</span></span>
<span id="cb61-266"><a href="#cb61-266" aria-hidden="true" tabindex="-1"></a><span class="in">  title(Life expectancy for men and women over time)</span></span>
<span id="cb61-267"><a href="#cb61-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-268"><a href="#cb61-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-269"><a href="#cb61-269" aria-hidden="true" tabindex="-1"></a>Which works well, because the data was ordered by year. If i were to order it by Life expectancy, the plot would be very different, bordering non-sensical.</span>
<span id="cb61-270"><a href="#cb61-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-273"><a href="#cb61-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-274"><a href="#cb61-274" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-275"><a href="#cb61-275" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-276"><a href="#cb61-276" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-277"><a href="#cb61-277" aria-hidden="true" tabindex="-1"></a><span class="in">sysuse uslifeexp, clear</span></span>
<span id="cb61-278"><a href="#cb61-278" aria-hidden="true" tabindex="-1"></a><span class="in">sort le_w</span></span>
<span id="cb61-279"><a href="#cb61-279" aria-hidden="true" tabindex="-1"></a><span class="in">line le_w le_m year, ///</span></span>
<span id="cb61-280"><a href="#cb61-280" aria-hidden="true" tabindex="-1"></a><span class="in">  title(Life expectancy for men and women over time)</span></span>
<span id="cb61-281"><a href="#cb61-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-282"><a href="#cb61-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-283"><a href="#cb61-283" aria-hidden="true" tabindex="-1"></a><span class="fu">### Customizing Line Styles</span></span>
<span id="cb61-284"><a href="#cb61-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-285"><a href="#cb61-285" aria-hidden="true" tabindex="-1"></a>This plot allows for a few customizations. For example, you can change the line style, color, and width:</span>
<span id="cb61-286"><a href="#cb61-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-289"><a href="#cb61-289" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-290"><a href="#cb61-290" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-291"><a href="#cb61-291" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-292"><a href="#cb61-292" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-293"><a href="#cb61-293" aria-hidden="true" tabindex="-1"></a><span class="in">sort year</span></span>
<span id="cb61-294"><a href="#cb61-294" aria-hidden="true" tabindex="-1"></a><span class="in">line le_w le_m year, lpattern(solid dash) ///</span></span>
<span id="cb61-295"><a href="#cb61-295" aria-hidden="true" tabindex="-1"></a><span class="in">            pstyle(p2 p3) ///</span></span>
<span id="cb61-296"><a href="#cb61-296" aria-hidden="true" tabindex="-1"></a><span class="in">            lwidth(thick medium) ///</span></span>
<span id="cb61-297"><a href="#cb61-297" aria-hidden="true" tabindex="-1"></a><span class="in">            xline(1930/1936, lw(2) lp(solid) lcolor(gs12)) ///</span></span>
<span id="cb61-298"><a href="#cb61-298" aria-hidden="true" tabindex="-1"></a><span class="in">            title(Life expectancy for men and women over time)</span></span>
<span id="cb61-299"><a href="#cb61-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-300"><a href="#cb61-300" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-301"><a href="#cb61-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-302"><a href="#cb61-302" aria-hidden="true" tabindex="-1"></a>In addition to the line, I also added some shading for the years 1930 to 1936. Useful if you want to emphasize a particular period.</span>
<span id="cb61-303"><a href="#cb61-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-304"><a href="#cb61-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-305"><a href="#cb61-305" aria-hidden="true" tabindex="-1"></a><span class="fu">### Advanced Customization</span></span>
<span id="cb61-306"><a href="#cb61-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-307"><a href="#cb61-307" aria-hidden="true" tabindex="-1"></a>As with Scatter plot, and infact most two-way plots, you can customize the plot in many ways. </span>
<span id="cb61-308"><a href="#cb61-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-311"><a href="#cb61-311" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-312"><a href="#cb61-312" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-313"><a href="#cb61-313" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-314"><a href="#cb61-314" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-315"><a href="#cb61-315" aria-hidden="true" tabindex="-1"></a><span class="in">line le_w le_m year, lpattern(solid dash) ///</span></span>
<span id="cb61-316"><a href="#cb61-316" aria-hidden="true" tabindex="-1"></a><span class="in">                     lcolor(red blue) ///</span></span>
<span id="cb61-317"><a href="#cb61-317" aria-hidden="true" tabindex="-1"></a><span class="in">                     lwidth(medthick medium) ///</span></span>
<span id="cb61-318"><a href="#cb61-318" aria-hidden="true" tabindex="-1"></a><span class="in">                     title("Life Expectancy Trends") ///</span></span>
<span id="cb61-319"><a href="#cb61-319" aria-hidden="true" tabindex="-1"></a><span class="in">                     subtitle("United States, 1900-2000") ///</span></span>
<span id="cb61-320"><a href="#cb61-320" aria-hidden="true" tabindex="-1"></a><span class="in">                     xtitle("Year") ytitle("Life Expectancy (years)") ///</span></span>
<span id="cb61-321"><a href="#cb61-321" aria-hidden="true" tabindex="-1"></a><span class="in">                     ylabel(40(10)80, angle(0)) ///</span></span>
<span id="cb61-322"><a href="#cb61-322" aria-hidden="true" tabindex="-1"></a><span class="in">                     xlabel(1900(20)2000) ///</span></span>
<span id="cb61-323"><a href="#cb61-323" aria-hidden="true" tabindex="-1"></a><span class="in">                     legend(order(1 "Women" 2 "Men")) ///</span></span>
<span id="cb61-324"><a href="#cb61-324" aria-hidden="true" tabindex="-1"></a><span class="in">                     note("Source: US Life Expectancy dataset")</span></span>
<span id="cb61-325"><a href="#cb61-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-326"><a href="#cb61-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-327"><a href="#cb61-327" aria-hidden="true" tabindex="-1"></a><span class="fu">### Model based line plot</span></span>
<span id="cb61-328"><a href="#cb61-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-329"><a href="#cb61-329" aria-hidden="true" tabindex="-1"></a>Something that its recommended to use more often are model-based line plots. That means that you are not plotting the data, but the predictions of a model. This is useful to better see patterns when the data is noisy.</span>
<span id="cb61-330"><a href="#cb61-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-331"><a href="#cb61-331" aria-hidden="true" tabindex="-1"></a>Lets use the <span class="in">`dui`</span> dataset and produce a combination of scatter plot with a line plot. On top of that, we will use confidence intervals. (typically means adding a <span class="in">`ci`</span> to the command)</span>
<span id="cb61-332"><a href="#cb61-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-333"><a href="#cb61-333" aria-hidden="true" tabindex="-1"></a>Lets see how they look like:</span>
<span id="cb61-334"><a href="#cb61-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-335"><a href="#cb61-335" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb61-336"><a href="#cb61-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-337"><a href="#cb61-337" aria-hidden="true" tabindex="-1"></a><span class="fu">## Linear Fit</span></span>
<span id="cb61-340"><a href="#cb61-340" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-341"><a href="#cb61-341" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-342"><a href="#cb61-342" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-343"><a href="#cb61-343" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-344"><a href="#cb61-344" aria-hidden="true" tabindex="-1"></a><span class="in">*| outcome: false</span></span>
<span id="cb61-345"><a href="#cb61-345" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-346"><a href="#cb61-346" aria-hidden="true" tabindex="-1"></a><span class="in">two (scatter citations fines) ///</span></span>
<span id="cb61-347"><a href="#cb61-347" aria-hidden="true" tabindex="-1"></a><span class="in">    (lfitci citations fines,  fcolor(%40)) , ///</span></span>
<span id="cb61-348"><a href="#cb61-348" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-349"><a href="#cb61-349" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Citations") xtitle("Fines in 000$")</span></span>
<span id="cb61-350"><a href="#cb61-350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-351"><a href="#cb61-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-352"><a href="#cb61-352" aria-hidden="true" tabindex="-1"></a><span class="fu">## Quadratic Fit</span></span>
<span id="cb61-355"><a href="#cb61-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-356"><a href="#cb61-356" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-357"><a href="#cb61-357" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-358"><a href="#cb61-358" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-359"><a href="#cb61-359" aria-hidden="true" tabindex="-1"></a><span class="in">*| outcome: false</span></span>
<span id="cb61-360"><a href="#cb61-360" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-361"><a href="#cb61-361" aria-hidden="true" tabindex="-1"></a><span class="in">two (scatter citations fines) ///</span></span>
<span id="cb61-362"><a href="#cb61-362" aria-hidden="true" tabindex="-1"></a><span class="in">    (qfitci citations fines,  fcolor(%40)) , ///</span></span>
<span id="cb61-363"><a href="#cb61-363" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-364"><a href="#cb61-364" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Citations") xtitle("Fines in 000$")</span></span>
<span id="cb61-365"><a href="#cb61-365" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-366"><a href="#cb61-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-367"><a href="#cb61-367" aria-hidden="true" tabindex="-1"></a><span class="fu">## NonParametric Fit</span></span>
<span id="cb61-370"><a href="#cb61-370" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-371"><a href="#cb61-371" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-372"><a href="#cb61-372" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-373"><a href="#cb61-373" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-374"><a href="#cb61-374" aria-hidden="true" tabindex="-1"></a><span class="in">*| outcome: false</span></span>
<span id="cb61-375"><a href="#cb61-375" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-376"><a href="#cb61-376" aria-hidden="true" tabindex="-1"></a><span class="in">two (scatter citations fines) ///</span></span>
<span id="cb61-377"><a href="#cb61-377" aria-hidden="true" tabindex="-1"></a><span class="in">    (lpolyci citations fines,  fcolor(%40)) , ///</span></span>
<span id="cb61-378"><a href="#cb61-378" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-379"><a href="#cb61-379" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Citations") xtitle("Fines in 000$")</span></span>
<span id="cb61-380"><a href="#cb61-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-381"><a href="#cb61-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-382"><a href="#cb61-382" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-383"><a href="#cb61-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-384"><a href="#cb61-384" aria-hidden="true" tabindex="-1"></a><span class="fu">## Histograms, Density Plots and Box Plots</span></span>
<span id="cb61-385"><a href="#cb61-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-386"><a href="#cb61-386" aria-hidden="true" tabindex="-1"></a>When it comes to visualizing the distribution of a single variable, your main options are histograms, density plots, and box plots. Histograms and <span class="in">`kdensity`</span> plots are both <span class="in">`twoway`</span> plots that can be overlayed. Box plots, however, are <span class="in">`graph`</span> plots, and are a bit more temperamental.</span>
<span id="cb61-387"><a href="#cb61-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-388"><a href="#cb61-388" aria-hidden="true" tabindex="-1"></a><span class="fu">### Histograms</span></span>
<span id="cb61-389"><a href="#cb61-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-390"><a href="#cb61-390" aria-hidden="true" tabindex="-1"></a>The first command we will see is the <span class="in">`histogram`</span> command. This command is used to create histograms, which are bar charts that show the frequency distribution of a single variable.</span>
<span id="cb61-391"><a href="#cb61-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-392"><a href="#cb61-392" aria-hidden="true" tabindex="-1"></a>In contrast with frequency tables, where you need to define the bins width or number of bins, histograms will do this for you. Not always in the best way, but it will do it.</span>
<span id="cb61-393"><a href="#cb61-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-394"><a href="#cb61-394" aria-hidden="true" tabindex="-1"></a>The basic syntax for a histogram is:</span>
<span id="cb61-395"><a href="#cb61-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-396"><a href="#cb61-396" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-397"><a href="#cb61-397" aria-hidden="true" tabindex="-1"></a><span class="in">histogram [varname] [if] [in] [weight] [, options]</span></span>
<span id="cb61-398"><a href="#cb61-398" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-399"><a href="#cb61-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-400"><a href="#cb61-400" aria-hidden="true" tabindex="-1"></a>Perhaps the biggest complain I have about histograms is that they do not allow for aweights. So if your weights are fractional, you may need to consider other works around.</span>
<span id="cb61-401"><a href="#cb61-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-402"><a href="#cb61-402" aria-hidden="true" tabindex="-1"></a>Lets see how this works</span>
<span id="cb61-403"><a href="#cb61-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-404"><a href="#cb61-404" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic Histogram</span></span>
<span id="cb61-405"><a href="#cb61-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-406"><a href="#cb61-406" aria-hidden="true" tabindex="-1"></a>The basic histogram plot will try to produce densities on the y-axis. It usually labels it correctly. </span>
<span id="cb61-407"><a href="#cb61-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-408"><a href="#cb61-408" aria-hidden="true" tabindex="-1"></a>You can, however, request <span class="in">`frequency`</span> or <span class="in">`percent`</span> on the y-axis.</span>
<span id="cb61-409"><a href="#cb61-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-412"><a href="#cb61-412" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-413"><a href="#cb61-413" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-414"><a href="#cb61-414" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-415"><a href="#cb61-415" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-416"><a href="#cb61-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-417"><a href="#cb61-417" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-418"><a href="#cb61-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-419"><a href="#cb61-419" aria-hidden="true" tabindex="-1"></a><span class="in">histogram fines, ///</span></span>
<span id="cb61-420"><a href="#cb61-420" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Histogram of Fines") ///</span></span>
<span id="cb61-421"><a href="#cb61-421" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("Fines in 000$") </span></span>
<span id="cb61-422"><a href="#cb61-422" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-423"><a href="#cb61-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-424"><a href="#cb61-424" aria-hidden="true" tabindex="-1"></a>By default, histogram will calculate the number of bins for you. However, you can specify the number of bins using the <span class="in">`bin()`</span> option. Alternatively, you can use <span class="in">`width()`</span> instead, making it either more or less granular.</span>
<span id="cb61-425"><a href="#cb61-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-426"><a href="#cb61-426" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb61-427"><a href="#cb61-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-428"><a href="#cb61-428" aria-hidden="true" tabindex="-1"></a><span class="fu">## Wider Width()</span></span>
<span id="cb61-429"><a href="#cb61-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-432"><a href="#cb61-432" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-433"><a href="#cb61-433" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-434"><a href="#cb61-434" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-435"><a href="#cb61-435" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-436"><a href="#cb61-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-437"><a href="#cb61-437" aria-hidden="true" tabindex="-1"></a><span class="in">histogram fines, ///</span></span>
<span id="cb61-438"><a href="#cb61-438" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Histogram of Fines") ///</span></span>
<span id="cb61-439"><a href="#cb61-439" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("Fines in 000$") width(.4)</span></span>
<span id="cb61-440"><a href="#cb61-440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-441"><a href="#cb61-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-442"><a href="#cb61-442" aria-hidden="true" tabindex="-1"></a><span class="fu">## Narrower Width()</span></span>
<span id="cb61-443"><a href="#cb61-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-446"><a href="#cb61-446" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-447"><a href="#cb61-447" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-448"><a href="#cb61-448" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-449"><a href="#cb61-449" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-450"><a href="#cb61-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-451"><a href="#cb61-451" aria-hidden="true" tabindex="-1"></a><span class="in">histogram fines, ///</span></span>
<span id="cb61-452"><a href="#cb61-452" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Histogram of Fines") ///</span></span>
<span id="cb61-453"><a href="#cb61-453" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("Fines in 000$") width(.1)</span></span>
<span id="cb61-454"><a href="#cb61-454" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-455"><a href="#cb61-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-456"><a href="#cb61-456" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-457"><a href="#cb61-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-458"><a href="#cb61-458" aria-hidden="true" tabindex="-1"></a>Wider bins will make the plot more general, but you lose some of the detail. Narrower bins will make the plot more detailed, but you may lose the overall picture. Its the classic bias-variance tradeoff.</span>
<span id="cb61-459"><a href="#cb61-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-460"><a href="#cb61-460" aria-hidden="true" tabindex="-1"></a><span class="fu">### Overlaying Histograms</span></span>
<span id="cb61-461"><a href="#cb61-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-462"><a href="#cb61-462" aria-hidden="true" tabindex="-1"></a>As mentioned before, because histograms are <span class="in">`twoway`</span> plots, you can overlay them. This is useful when you want to compare the distribution of a variable across different groups (Low number of groups). Note that by default, histograms come with just one color, but you can change this using the <span class="in">`pstyle()`</span> option.</span>
<span id="cb61-463"><a href="#cb61-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-464"><a href="#cb61-464" aria-hidden="true" tabindex="-1"></a>You may want to use transparency to make the plot more readable. and even use other options to make the plot visually appealing.</span>
<span id="cb61-465"><a href="#cb61-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-466"><a href="#cb61-466" aria-hidden="true" tabindex="-1"></a>For the last example, I will also use a <span class="in">`global`</span> to pass options that are common to all subplots.</span>
<span id="cb61-467"><a href="#cb61-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-468"><a href="#cb61-468" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb61-469"><a href="#cb61-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-470"><a href="#cb61-470" aria-hidden="true" tabindex="-1"></a><span class="fu">## Simple Overlap</span></span>
<span id="cb61-473"><a href="#cb61-473" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-474"><a href="#cb61-474" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-475"><a href="#cb61-475" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-476"><a href="#cb61-476" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-477"><a href="#cb61-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-478"><a href="#cb61-478" aria-hidden="true" tabindex="-1"></a><span class="in">two (histogram citations if csize==1, pstyle(p1)) ///</span></span>
<span id="cb61-479"><a href="#cb61-479" aria-hidden="true" tabindex="-1"></a><span class="in">    (histogram citations if csize==2, pstyle(p2)) ///</span></span>
<span id="cb61-480"><a href="#cb61-480" aria-hidden="true" tabindex="-1"></a><span class="in">    (histogram citations if csize==3, pstyle(p3)) , ///</span></span>
<span id="cb61-481"><a href="#cb61-481" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Histogram of citations") ///</span></span>
<span id="cb61-482"><a href="#cb61-482" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle("By city Size") ///</span></span>
<span id="cb61-483"><a href="#cb61-483" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Fines in 000$") ///</span></span>
<span id="cb61-484"><a href="#cb61-484" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "Small" 2 "Medium" 3 "Large"))</span></span>
<span id="cb61-485"><a href="#cb61-485" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-486"><a href="#cb61-486" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb61-487"><a href="#cb61-487" aria-hidden="true" tabindex="-1"></a><span class="fu">## With Transparency</span></span>
<span id="cb61-488"><a href="#cb61-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-491"><a href="#cb61-491" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-492"><a href="#cb61-492" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-493"><a href="#cb61-493" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-494"><a href="#cb61-494" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-495"><a href="#cb61-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-496"><a href="#cb61-496" aria-hidden="true" tabindex="-1"></a><span class="in">two (histogram citations if csize==1, pstyle(p1) color(%75)) ///</span></span>
<span id="cb61-497"><a href="#cb61-497" aria-hidden="true" tabindex="-1"></a><span class="in">    (histogram citations if csize==2, pstyle(p2) color(%75)) ///</span></span>
<span id="cb61-498"><a href="#cb61-498" aria-hidden="true" tabindex="-1"></a><span class="in">    (histogram citations if csize==3, pstyle(p3) color(%75)), ///</span></span>
<span id="cb61-499"><a href="#cb61-499" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Histogram of citations") ///</span></span>
<span id="cb61-500"><a href="#cb61-500" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle("By city Size") ///</span></span>
<span id="cb61-501"><a href="#cb61-501" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Fines in 000$") ///</span></span>
<span id="cb61-502"><a href="#cb61-502" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "Small" 2 "Medium" 3 "Large"))</span></span>
<span id="cb61-503"><a href="#cb61-503" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-504"><a href="#cb61-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-505"><a href="#cb61-505" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fixing widths</span></span>
<span id="cb61-506"><a href="#cb61-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-509"><a href="#cb61-509" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-510"><a href="#cb61-510" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-511"><a href="#cb61-511" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-512"><a href="#cb61-512" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-513"><a href="#cb61-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-514"><a href="#cb61-514" aria-hidden="true" tabindex="-1"></a><span class="in">global options width(3) start(0) color(%55)</span></span>
<span id="cb61-515"><a href="#cb61-515" aria-hidden="true" tabindex="-1"></a><span class="in">two (histogram citations if csize==1, pstyle(p1) $options) ///</span></span>
<span id="cb61-516"><a href="#cb61-516" aria-hidden="true" tabindex="-1"></a><span class="in">    (histogram citations if csize==2, pstyle(p2) $options) ///</span></span>
<span id="cb61-517"><a href="#cb61-517" aria-hidden="true" tabindex="-1"></a><span class="in">    (histogram citations if csize==3, pstyle(p3) $options), ///</span></span>
<span id="cb61-518"><a href="#cb61-518" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Histogram of citations") ///</span></span>
<span id="cb61-519"><a href="#cb61-519" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle("By city Size") ///</span></span>
<span id="cb61-520"><a href="#cb61-520" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Fines in 000$") ///</span></span>
<span id="cb61-521"><a href="#cb61-521" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "Small" 2 "Medium" 3 "Large"))</span></span>
<span id="cb61-522"><a href="#cb61-522" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-523"><a href="#cb61-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-524"><a href="#cb61-524" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb61-525"><a href="#cb61-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-526"><a href="#cb61-526" aria-hidden="true" tabindex="-1"></a>One more note. Histograms assume your dependent variable is continuous. However, you could also use them as discrete, by simply adding the <span class="in">`discrete`</span> option. Unless <span class="in">`width()`</span> is specified, each bar will represent a single value.</span>
<span id="cb61-527"><a href="#cb61-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-528"><a href="#cb61-528" aria-hidden="true" tabindex="-1"></a><span class="fu">## Kernel Density Plots</span></span>
<span id="cb61-529"><a href="#cb61-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-530"><a href="#cb61-530" aria-hidden="true" tabindex="-1"></a>As mentione before, histograms are a good way to visualize distributions of a single variable. Something that histograms do not do well is provide a smooth estimate of the probability density function. And, in Stata, its not possible to add fractional weights to histograms. </span>
<span id="cb61-531"><a href="#cb61-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-532"><a href="#cb61-532" aria-hidden="true" tabindex="-1"></a>There is, however, another option. Kernel Density Plots. These plots provide a smooth estimate of the probability density function of a variable. As with Histograms, they can be very sensitive to the choice of bandwidth (how smooth or rugged the plot is). </span>
<span id="cb61-533"><a href="#cb61-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-534"><a href="#cb61-534" aria-hidden="true" tabindex="-1"></a>One should also note that Kernel density plots cannot be used to plot distributions of discrete variables, and may provide misleading results if used with data that have constraints, or very relevant modes.</span>
<span id="cb61-535"><a href="#cb61-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-536"><a href="#cb61-536" aria-hidden="true" tabindex="-1"></a>The basic syntax for a kernel density plot is:</span>
<span id="cb61-537"><a href="#cb61-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-538"><a href="#cb61-538" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-539"><a href="#cb61-539" aria-hidden="true" tabindex="-1"></a><span class="in">kdensity [varname] [if] [in] [weight] [, options]</span></span>
<span id="cb61-540"><a href="#cb61-540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-541"><a href="#cb61-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-542"><a href="#cb61-542" aria-hidden="true" tabindex="-1"></a>And because its a <span class="in">`twoway`</span> plot, you can overlay them with other plots.</span>
<span id="cb61-543"><a href="#cb61-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-544"><a href="#cb61-544" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic Kernel Density Plot</span></span>
<span id="cb61-545"><a href="#cb61-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-546"><a href="#cb61-546" aria-hidden="true" tabindex="-1"></a>Lets see how this works with the <span class="in">`dui`</span> dataset.</span>
<span id="cb61-547"><a href="#cb61-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-550"><a href="#cb61-550" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-551"><a href="#cb61-551" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-552"><a href="#cb61-552" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-553"><a href="#cb61-553" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-554"><a href="#cb61-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-555"><a href="#cb61-555" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-556"><a href="#cb61-556" aria-hidden="true" tabindex="-1"></a><span class="in">kdensity citation, ///</span></span>
<span id="cb61-557"><a href="#cb61-557" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Kernel Density Estimate of Citations") ///</span></span>
<span id="cb61-558"><a href="#cb61-558" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("# of Citations") ///</span></span>
<span id="cb61-559"><a href="#cb61-559" aria-hidden="true" tabindex="-1"></a><span class="in">  ytitle("Density") scale(1.5) </span></span>
<span id="cb61-560"><a href="#cb61-560" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-561"><a href="#cb61-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-562"><a href="#cb61-562" aria-hidden="true" tabindex="-1"></a>Noticed how smooth the plot is. The <span class="in">`bwidth`</span> was set to 2.31, which is constructed using a rule of thumb. It also uses <span class="in">`epanechnikov`</span> as the default kernel. While you can change the <span class="in">`kernel()`</span> function, the default one is "optimal" for most cases. What would be more important is the <span class="in">`bwidth()`</span> option.</span>
<span id="cb61-563"><a href="#cb61-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-564"><a href="#cb61-564" aria-hidden="true" tabindex="-1"></a><span class="fu">### Kernel Densities and bandwidth choice</span></span>
<span id="cb61-565"><a href="#cb61-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-566"><a href="#cb61-566" aria-hidden="true" tabindex="-1"></a>As mentioned before, the bandwidth is a very important parameter. You can set it manually, with the understanding that a smaller bandwidth will make the plot more rugged, and a larger bandwidth will make it smoother. At the limit (infinite bandwidth), the plot will be a horizontal line, and on the other end, it would look like a histogram (each value its own curve)</span>
<span id="cb61-567"><a href="#cb61-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-568"><a href="#cb61-568" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb61-569"><a href="#cb61-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-570"><a href="#cb61-570" aria-hidden="true" tabindex="-1"></a><span class="fu">## Smaller Bandwidth </span></span>
<span id="cb61-571"><a href="#cb61-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-574"><a href="#cb61-574" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-575"><a href="#cb61-575" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-576"><a href="#cb61-576" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-577"><a href="#cb61-577" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-578"><a href="#cb61-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-579"><a href="#cb61-579" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-580"><a href="#cb61-580" aria-hidden="true" tabindex="-1"></a><span class="in">kdensity citation, ///</span></span>
<span id="cb61-581"><a href="#cb61-581" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Kernel Density Estimate of Citations") ///</span></span>
<span id="cb61-582"><a href="#cb61-582" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("# of Citations") ///</span></span>
<span id="cb61-583"><a href="#cb61-583" aria-hidden="true" tabindex="-1"></a><span class="in">  ytitle("Density") scale(1.5) bw(1)</span></span>
<span id="cb61-584"><a href="#cb61-584" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-585"><a href="#cb61-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-586"><a href="#cb61-586" aria-hidden="true" tabindex="-1"></a><span class="fu">## Larger Bandwidth </span></span>
<span id="cb61-587"><a href="#cb61-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-590"><a href="#cb61-590" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-591"><a href="#cb61-591" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-592"><a href="#cb61-592" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-593"><a href="#cb61-593" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-594"><a href="#cb61-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-595"><a href="#cb61-595" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-596"><a href="#cb61-596" aria-hidden="true" tabindex="-1"></a><span class="in">kdensity citation, ///</span></span>
<span id="cb61-597"><a href="#cb61-597" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Kernel Density Estimate of Citations") ///</span></span>
<span id="cb61-598"><a href="#cb61-598" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("# of Citations") ///</span></span>
<span id="cb61-599"><a href="#cb61-599" aria-hidden="true" tabindex="-1"></a><span class="in">  ytitle("Density") scale(1.5) bw(4)</span></span>
<span id="cb61-600"><a href="#cb61-600" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-601"><a href="#cb61-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-602"><a href="#cb61-602" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-603"><a href="#cb61-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-604"><a href="#cb61-604" aria-hidden="true" tabindex="-1"></a>Perhaps of interest to some, the Kernel Density does not estimate the bandwidth for every point of data. Instead, it uses a map of points to reduce the computational burden. Then, simply makes a <span class="in">`lineplot`</span>. If you want to see the curve for every point in your data, you have to use the <span class="in">`at()`</span> option.</span>
<span id="cb61-605"><a href="#cb61-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-606"><a href="#cb61-606" aria-hidden="true" tabindex="-1"></a><span class="fu">### Curves, Areas, and Overlays</span></span>
<span id="cb61-607"><a href="#cb61-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-608"><a href="#cb61-608" aria-hidden="true" tabindex="-1"></a>Many of the options you can use with histograms, scatterplots or line plots can also be used with Kernel Density plots. However, I will introduce one that some may find useful: <span class="in">`recast`</span>. This option allows you to change the plot type from a line to something else. For example, you can use <span class="in">`recast(area)`</span> to fill the area under the curve.</span>
<span id="cb61-609"><a href="#cb61-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-612"><a href="#cb61-612" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-613"><a href="#cb61-613" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-614"><a href="#cb61-614" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-615"><a href="#cb61-615" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-616"><a href="#cb61-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-617"><a href="#cb61-617" aria-hidden="true" tabindex="-1"></a><span class="in">webuse dui, clear</span></span>
<span id="cb61-618"><a href="#cb61-618" aria-hidden="true" tabindex="-1"></a><span class="in">kdensity citation, ///</span></span>
<span id="cb61-619"><a href="#cb61-619" aria-hidden="true" tabindex="-1"></a><span class="in">  title("Kernel Density Estimate of Citations") ///</span></span>
<span id="cb61-620"><a href="#cb61-620" aria-hidden="true" tabindex="-1"></a><span class="in">  xtitle("# of Citations") ///</span></span>
<span id="cb61-621"><a href="#cb61-621" aria-hidden="true" tabindex="-1"></a><span class="in">  ytitle("Density") scale(1.5) ///</span></span>
<span id="cb61-622"><a href="#cb61-622" aria-hidden="true" tabindex="-1"></a><span class="in">  recast(area) </span></span>
<span id="cb61-623"><a href="#cb61-623" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-624"><a href="#cb61-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-625"><a href="#cb61-625" aria-hidden="true" tabindex="-1"></a>This is not the most effective way of changing the plot type, but does the work if the data is small. With larger datasets, other methods may be more useful.</span>
<span id="cb61-626"><a href="#cb61-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-627"><a href="#cb61-627" aria-hidden="true" tabindex="-1"></a>What about overlaying? We can do that as well, as we did with histograms. Ohh, and in contrast with histograms, you do not need to specify colors, as you did with histograms.</span>
<span id="cb61-628"><a href="#cb61-628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-629"><a href="#cb61-629" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb61-630"><a href="#cb61-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-631"><a href="#cb61-631" aria-hidden="true" tabindex="-1"></a><span class="fu">## Simple Overlap</span></span>
<span id="cb61-634"><a href="#cb61-634" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-635"><a href="#cb61-635" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-636"><a href="#cb61-636" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-637"><a href="#cb61-637" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-638"><a href="#cb61-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-639"><a href="#cb61-639" aria-hidden="true" tabindex="-1"></a><span class="in">global options bw(3)</span></span>
<span id="cb61-640"><a href="#cb61-640" aria-hidden="true" tabindex="-1"></a><span class="in">two (kdensity citations if csize==1, $options ) ///</span></span>
<span id="cb61-641"><a href="#cb61-641" aria-hidden="true" tabindex="-1"></a><span class="in">    (kdensity citations if csize==2, $options ) ///</span></span>
<span id="cb61-642"><a href="#cb61-642" aria-hidden="true" tabindex="-1"></a><span class="in">    (kdensity citations if csize==3, $options ) , ///</span></span>
<span id="cb61-643"><a href="#cb61-643" aria-hidden="true" tabindex="-1"></a><span class="in">    title("kdensity of citations") ///</span></span>
<span id="cb61-644"><a href="#cb61-644" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle("By city Size") ///</span></span>
<span id="cb61-645"><a href="#cb61-645" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Fines in 000$") ///</span></span>
<span id="cb61-646"><a href="#cb61-646" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "Small" 2 "Medium" 3 "Large"))</span></span>
<span id="cb61-647"><a href="#cb61-647" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-648"><a href="#cb61-648" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb61-649"><a href="#cb61-649" aria-hidden="true" tabindex="-1"></a><span class="fu">## As an Area</span></span>
<span id="cb61-650"><a href="#cb61-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-653"><a href="#cb61-653" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-654"><a href="#cb61-654" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-655"><a href="#cb61-655" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-656"><a href="#cb61-656" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-657"><a href="#cb61-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-658"><a href="#cb61-658" aria-hidden="true" tabindex="-1"></a><span class="in">global options bw(3) recast(area  )</span></span>
<span id="cb61-659"><a href="#cb61-659" aria-hidden="true" tabindex="-1"></a><span class="in">two (kdensity citations if csize==1, $options ) ///</span></span>
<span id="cb61-660"><a href="#cb61-660" aria-hidden="true" tabindex="-1"></a><span class="in">    (kdensity citations if csize==2, $options ) ///</span></span>
<span id="cb61-661"><a href="#cb61-661" aria-hidden="true" tabindex="-1"></a><span class="in">    (kdensity citations if csize==3, $options ) , ///</span></span>
<span id="cb61-662"><a href="#cb61-662" aria-hidden="true" tabindex="-1"></a><span class="in">    title("kdensity of citations") ///</span></span>
<span id="cb61-663"><a href="#cb61-663" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle("By city Size") ///</span></span>
<span id="cb61-664"><a href="#cb61-664" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Fines in 000$") ///</span></span>
<span id="cb61-665"><a href="#cb61-665" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "Small" 2 "Medium" 3 "Large"))</span></span>
<span id="cb61-666"><a href="#cb61-666" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-667"><a href="#cb61-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-668"><a href="#cb61-668" aria-hidden="true" tabindex="-1"></a><span class="fu">## Adding transparency</span></span>
<span id="cb61-669"><a href="#cb61-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-672"><a href="#cb61-672" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-673"><a href="#cb61-673" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-674"><a href="#cb61-674" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-675"><a href="#cb61-675" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-676"><a href="#cb61-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-677"><a href="#cb61-677" aria-hidden="true" tabindex="-1"></a><span class="in">global options bw(3) recast(area) color(%50)</span></span>
<span id="cb61-678"><a href="#cb61-678" aria-hidden="true" tabindex="-1"></a><span class="in">two (kdensity citations if csize==1, $options ) ///</span></span>
<span id="cb61-679"><a href="#cb61-679" aria-hidden="true" tabindex="-1"></a><span class="in">    (kdensity citations if csize==2, $options ) ///</span></span>
<span id="cb61-680"><a href="#cb61-680" aria-hidden="true" tabindex="-1"></a><span class="in">    (kdensity citations if csize==3, $options ) , ///</span></span>
<span id="cb61-681"><a href="#cb61-681" aria-hidden="true" tabindex="-1"></a><span class="in">    title("kdensity of citations") ///</span></span>
<span id="cb61-682"><a href="#cb61-682" aria-hidden="true" tabindex="-1"></a><span class="in">    subtitle("By city Size") ///</span></span>
<span id="cb61-683"><a href="#cb61-683" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Fines in 000$") ///</span></span>
<span id="cb61-684"><a href="#cb61-684" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "Small" 2 "Medium" 3 "Large"))</span></span>
<span id="cb61-685"><a href="#cb61-685" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-686"><a href="#cb61-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-687"><a href="#cb61-687" aria-hidden="true" tabindex="-1"></a>::: </span>
<span id="cb61-688"><a href="#cb61-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-689"><a href="#cb61-689" aria-hidden="true" tabindex="-1"></a>Few things to notice here.</span>
<span id="cb61-690"><a href="#cb61-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-691"><a href="#cb61-691" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Because im using less data, the default bandwidth makes a rougher plot. I increase it to 3 to make it smoother.</span>
<span id="cb61-692"><a href="#cb61-692" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Since the data by groups have "hard" limits, the plots are cut at the edges. </span>
<span id="cb61-693"><a href="#cb61-693" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>These plot cannot be used to compare the sizes of the groups, as the area under the curve is the same by definition.</span>
<span id="cb61-694"><a href="#cb61-694" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb61-695"><a href="#cb61-695" aria-hidden="true" tabindex="-1"></a><span class="fu">## Range plots</span></span>
<span id="cb61-696"><a href="#cb61-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-697"><a href="#cb61-697" aria-hidden="true" tabindex="-1"></a>There is a fairly large list of plots that fall under this category. Range plots are mostly used to show, as the name implies, a particular range of values. Perhaps the most common of these would be to show confidence intervals.</span>
<span id="cb61-698"><a href="#cb61-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-699"><a href="#cb61-699" aria-hidden="true" tabindex="-1"></a>They all have a similar syntax:</span>
<span id="cb61-700"><a href="#cb61-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-701"><a href="#cb61-701" aria-hidden="true" tabindex="-1"></a><span class="in">```stata</span></span>
<span id="cb61-702"><a href="#cb61-702" aria-hidden="true" tabindex="-1"></a><span class="in">two range_plot y_lower y_higher x_variable [if] , [options]</span></span>
<span id="cb61-703"><a href="#cb61-703" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-704"><a href="#cb61-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-705"><a href="#cb61-705" aria-hidden="true" tabindex="-1"></a>As you can see, the main difference is that you need to specify a lower and upper bound for the y-axis. And, as you can imagine, this will generate a nice rendition of a range.</span>
<span id="cb61-706"><a href="#cb61-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-707"><a href="#cb61-707" aria-hidden="true" tabindex="-1"></a>Perhaps the biggest issue with these plots is that you need to prepare the data beforehand. This is not a big issue.</span>
<span id="cb61-708"><a href="#cb61-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-709"><a href="#cb61-709" aria-hidden="true" tabindex="-1"></a>So lets see how this works:</span>
<span id="cb61-710"><a href="#cb61-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-711"><a href="#cb61-711" aria-hidden="true" tabindex="-1"></a><span class="fu">### Ranges Galore</span></span>
<span id="cb61-712"><a href="#cb61-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-713"><a href="#cb61-713" aria-hidden="true" tabindex="-1"></a>To show how this type of plots work, I will use the dataset <span class="in">`cattaneo2`</span>. This dataset contains data for childrens weight at birth, in addition to other relevant information. I will do some data manipulation to create the data I need for the plots</span>
<span id="cb61-714"><a href="#cb61-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-717"><a href="#cb61-717" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-718"><a href="#cb61-718" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-719"><a href="#cb61-719" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: false</span></span>
<span id="cb61-720"><a href="#cb61-720" aria-hidden="true" tabindex="-1"></a><span class="in">*| outcome: false</span></span>
<span id="cb61-721"><a href="#cb61-721" aria-hidden="true" tabindex="-1"></a><span class="in">webuse cattaneo2, clear</span></span>
<span id="cb61-722"><a href="#cb61-722" aria-hidden="true" tabindex="-1"></a><span class="in">// Constrain age of mother</span></span>
<span id="cb61-723"><a href="#cb61-723" aria-hidden="true" tabindex="-1"></a><span class="in">drop if mage&lt;18 | mage&gt;35</span></span>
<span id="cb61-724"><a href="#cb61-724" aria-hidden="true" tabindex="-1"></a><span class="in">// Get summary for  Weight at birth</span></span>
<span id="cb61-725"><a href="#cb61-725" aria-hidden="true" tabindex="-1"></a><span class="in">// mean and p25 and p75 by age and smoking</span></span>
<span id="cb61-726"><a href="#cb61-726" aria-hidden="true" tabindex="-1"></a><span class="in">collapse (mean) mean_bweight=bweight ///</span></span>
<span id="cb61-727"><a href="#cb61-727" aria-hidden="true" tabindex="-1"></a><span class="in">         (p25) p25_bweight=bweight ///</span></span>
<span id="cb61-728"><a href="#cb61-728" aria-hidden="true" tabindex="-1"></a><span class="in">         (p75) p75_bweight=bweight, by(mage mbsmoke)</span></span>
<span id="cb61-729"><a href="#cb61-729" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-730"><a href="#cb61-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-731"><a href="#cb61-731" aria-hidden="true" tabindex="-1"></a>Now that we have the data, lets create the plot(s). Each one will show the range of weights at birth for different groups of mothers. To add additional information, I will also add the mean "weight at birth" as a scatter plot.</span>
<span id="cb61-732"><a href="#cb61-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-733"><a href="#cb61-733" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb61-734"><a href="#cb61-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-735"><a href="#cb61-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-736"><a href="#cb61-736" aria-hidden="true" tabindex="-1"></a><span class="fu">## Area</span></span>
<span id="cb61-737"><a href="#cb61-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-740"><a href="#cb61-740" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-741"><a href="#cb61-741" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-742"><a href="#cb61-742" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-743"><a href="#cb61-743" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-744"><a href="#cb61-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-745"><a href="#cb61-745" aria-hidden="true" tabindex="-1"></a><span class="in">two (rarea p25_bweight p75_bweight mage if mbsmoke==0, color(%50)) ///</span></span>
<span id="cb61-746"><a href="#cb61-746" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==0, pstyle(p1) connect(l)) , ///</span></span>
<span id="cb61-747"><a href="#cb61-747" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Range of Birth Weight by Mother's Age") ///</span></span>
<span id="cb61-748"><a href="#cb61-748" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Mother's Age") ///</span></span>
<span id="cb61-749"><a href="#cb61-749" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Birth Weight (lbs)") ///</span></span>
<span id="cb61-750"><a href="#cb61-750" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-751"><a href="#cb61-751" aria-hidden="true" tabindex="-1"></a><span class="in">    note("Note: The shaded area represents the 25th to 75th percentile range")</span></span>
<span id="cb61-752"><a href="#cb61-752" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-753"><a href="#cb61-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-754"><a href="#cb61-754" aria-hidden="true" tabindex="-1"></a><span class="fu">## Bar</span></span>
<span id="cb61-755"><a href="#cb61-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-758"><a href="#cb61-758" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-759"><a href="#cb61-759" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-760"><a href="#cb61-760" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-761"><a href="#cb61-761" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-762"><a href="#cb61-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-763"><a href="#cb61-763" aria-hidden="true" tabindex="-1"></a><span class="in">two (rbar p25_bweight p75_bweight mage if mbsmoke==0, color(%50)) ///</span></span>
<span id="cb61-764"><a href="#cb61-764" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==0, pstyle(p1) connect(l)) , ///</span></span>
<span id="cb61-765"><a href="#cb61-765" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Range of Birth Weight by Mother's Age") ///</span></span>
<span id="cb61-766"><a href="#cb61-766" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Mother's Age") ///</span></span>
<span id="cb61-767"><a href="#cb61-767" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Birth Weight (lbs)") ///</span></span>
<span id="cb61-768"><a href="#cb61-768" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-769"><a href="#cb61-769" aria-hidden="true" tabindex="-1"></a><span class="in">    note("Note: The shaded area represents the 25th to 75th percentile range")</span></span>
<span id="cb61-770"><a href="#cb61-770" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-771"><a href="#cb61-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-772"><a href="#cb61-772" aria-hidden="true" tabindex="-1"></a><span class="fu">## Spike</span></span>
<span id="cb61-773"><a href="#cb61-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-776"><a href="#cb61-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-777"><a href="#cb61-777" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-778"><a href="#cb61-778" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-779"><a href="#cb61-779" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-780"><a href="#cb61-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-781"><a href="#cb61-781" aria-hidden="true" tabindex="-1"></a><span class="in">two (rspike p25_bweight p75_bweight mage if mbsmoke==0, color(%50)) ///</span></span>
<span id="cb61-782"><a href="#cb61-782" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==0, pstyle(p1) connect(l)) , ///</span></span>
<span id="cb61-783"><a href="#cb61-783" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Range of Birth Weight by Mother's Age") ///</span></span>
<span id="cb61-784"><a href="#cb61-784" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Mother's Age") ///</span></span>
<span id="cb61-785"><a href="#cb61-785" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Birth Weight (lbs)") ///</span></span>
<span id="cb61-786"><a href="#cb61-786" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-787"><a href="#cb61-787" aria-hidden="true" tabindex="-1"></a><span class="in">    note("Note: The shaded area represents the 25th to 75th percentile range")</span></span>
<span id="cb61-788"><a href="#cb61-788" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-789"><a href="#cb61-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-790"><a href="#cb61-790" aria-hidden="true" tabindex="-1"></a><span class="fu">## Cap</span></span>
<span id="cb61-791"><a href="#cb61-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-794"><a href="#cb61-794" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-795"><a href="#cb61-795" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-796"><a href="#cb61-796" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-797"><a href="#cb61-797" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-798"><a href="#cb61-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-799"><a href="#cb61-799" aria-hidden="true" tabindex="-1"></a><span class="in">two (rcap p25_bweight p75_bweight mage if mbsmoke==0, color(%50)) ///</span></span>
<span id="cb61-800"><a href="#cb61-800" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==0, pstyle(p1) connect(l)) , ///</span></span>
<span id="cb61-801"><a href="#cb61-801" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Range of Birth Weight by Mother's Age") ///</span></span>
<span id="cb61-802"><a href="#cb61-802" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Mother's Age") ///</span></span>
<span id="cb61-803"><a href="#cb61-803" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Birth Weight (lbs)") ///</span></span>
<span id="cb61-804"><a href="#cb61-804" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-805"><a href="#cb61-805" aria-hidden="true" tabindex="-1"></a><span class="in">    note("Note: The shaded area represents the 25th to 75th percentile range")</span></span>
<span id="cb61-806"><a href="#cb61-806" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-807"><a href="#cb61-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-808"><a href="#cb61-808" aria-hidden="true" tabindex="-1"></a><span class="fu">## CapSym</span></span>
<span id="cb61-809"><a href="#cb61-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-812"><a href="#cb61-812" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-813"><a href="#cb61-813" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-814"><a href="#cb61-814" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-815"><a href="#cb61-815" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-816"><a href="#cb61-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-817"><a href="#cb61-817" aria-hidden="true" tabindex="-1"></a><span class="in">two (rcapsym p25_bweight p75_bweight mage if mbsmoke==0, color(%50)) ///</span></span>
<span id="cb61-818"><a href="#cb61-818" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==0, pstyle(p1) connect(l)) , ///</span></span>
<span id="cb61-819"><a href="#cb61-819" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Range of Birth Weight by Mother's Age") ///</span></span>
<span id="cb61-820"><a href="#cb61-820" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Mother's Age") ///</span></span>
<span id="cb61-821"><a href="#cb61-821" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Birth Weight (lbs)") ///</span></span>
<span id="cb61-822"><a href="#cb61-822" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(off) scale(1.4) ///</span></span>
<span id="cb61-823"><a href="#cb61-823" aria-hidden="true" tabindex="-1"></a><span class="in">    note("Note: The shaded area represents the 25th to 75th percentile range")</span></span>
<span id="cb61-824"><a href="#cb61-824" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-825"><a href="#cb61-825" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-826"><a href="#cb61-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-827"><a href="#cb61-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-828"><a href="#cb61-828" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb61-829"><a href="#cb61-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-830"><a href="#cb61-830" aria-hidden="true" tabindex="-1"></a>The rest (rscatter, rline and rconnected) are not very useful, as they are just a scatter plot, line plots, or both.</span>
<span id="cb61-831"><a href="#cb61-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-832"><a href="#cb61-832" aria-hidden="true" tabindex="-1"></a>And of course, you can combine them!</span>
<span id="cb61-833"><a href="#cb61-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-836"><a href="#cb61-836" aria-hidden="true" tabindex="-1"></a><span class="in">```{stata}</span></span>
<span id="cb61-837"><a href="#cb61-837" aria-hidden="true" tabindex="-1"></a><span class="in">*| echo: true</span></span>
<span id="cb61-838"><a href="#cb61-838" aria-hidden="true" tabindex="-1"></a><span class="in">*| code-fold: true</span></span>
<span id="cb61-839"><a href="#cb61-839" aria-hidden="true" tabindex="-1"></a><span class="in">*| fig-align: center</span></span>
<span id="cb61-840"><a href="#cb61-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-841"><a href="#cb61-841" aria-hidden="true" tabindex="-1"></a><span class="in">two (rarea p25_bweight p75_bweight mage if mbsmoke==0, pstyle(p1) color(%50)) ///</span></span>
<span id="cb61-842"><a href="#cb61-842" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==0, pstyle(p1) connect(l)) ///</span></span>
<span id="cb61-843"><a href="#cb61-843" aria-hidden="true" tabindex="-1"></a><span class="in">    (rarea p25_bweight p75_bweight mage if mbsmoke==1, pstyle(p2) color(%50)) ///</span></span>
<span id="cb61-844"><a href="#cb61-844" aria-hidden="true" tabindex="-1"></a><span class="in">    (scatter mean_bweight mage if mbsmoke==1, pstyle(p2) connect(l)) , ///</span></span>
<span id="cb61-845"><a href="#cb61-845" aria-hidden="true" tabindex="-1"></a><span class="in">    title("Range of Birth Weight by Mother's Age") ///</span></span>
<span id="cb61-846"><a href="#cb61-846" aria-hidden="true" tabindex="-1"></a><span class="in">    xtitle("Mother's Age") ///</span></span>
<span id="cb61-847"><a href="#cb61-847" aria-hidden="true" tabindex="-1"></a><span class="in">    ytitle("Birth Weight (lbs)") ///</span></span>
<span id="cb61-848"><a href="#cb61-848" aria-hidden="true" tabindex="-1"></a><span class="in">    legend(order(1 "NonSmokers" 3 "Smokers")) ///</span></span>
<span id="cb61-849"><a href="#cb61-849" aria-hidden="true" tabindex="-1"></a><span class="in">    scale(1.4) ///</span></span>
<span id="cb61-850"><a href="#cb61-850" aria-hidden="true" tabindex="-1"></a><span class="in">    note("Note: The shaded area represents the 25th to 75th percentile range")</span></span>
<span id="cb61-851"><a href="#cb61-851" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb61-852"><a href="#cb61-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-853"><a href="#cb61-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-854"><a href="#cb61-854" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusion</span></span>
<span id="cb61-855"><a href="#cb61-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-856"><a href="#cb61-856" aria-hidden="true" tabindex="-1"></a>This are the most basic, yet most useful plots you will use in your data analysis. There are, however, other types of plots that Stata can produce from the box:</span>
<span id="cb61-857"><a href="#cb61-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-858"><a href="#cb61-858" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`graph pie`</span>: Pie charts</span>
<span id="cb61-859"><a href="#cb61-859" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`graph bar`</span>: Bar charts, where the bars can be horizontal or vertical, stacked or unstacked, by groups, which can be used to represent many statistical summaries. (The command itself will generate those summaries)</span>
<span id="cb61-860"><a href="#cb61-860" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`graph dot`</span>: Dot plots, which are similar to bar charts but use dots instead of bars. Useful to compare summary statistics with a less cluttered plot. Not to be confused with <span class="in">`twoway dot`</span>.</span>
<span id="cb61-861"><a href="#cb61-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-862"><a href="#cb61-862" aria-hidden="true" tabindex="-1"></a>There are also the <span class="in">`pair coordinated`</span> plots. Where you provide 4 variables, which indicate the initial and final coordinates of a line. So something to keep in mind.</span>
<span id="cb61-863"><a href="#cb61-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-864"><a href="#cb61-864" aria-hidden="true" tabindex="-1"></a>Other than this, there are many community-contributed commands that can be used to create more complex plots, including my own contributions. For for basic data analysis, the above should be more than enough.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>