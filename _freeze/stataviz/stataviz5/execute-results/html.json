{
  "hash": "a23542b52024b222cf1bf7511783452e",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Palmer Penguins\nsubtitle: A quick guide for visualization\ncode-fold: false\n---\n\n## Introduction\n\nIn this post, I will show some of the basics of data visualization using the Palmer Pinguins dataset. This dataset is available in `R` using the `palmerpenguins` package. And now there is also a copy of in using `frause` for Stata. The dataset contains data on 344 penguins collected from 3 islands in the Palmer Archipelago, Antarctica. The data was collected and made available by Dr. Kristen Gorman and the Palmer Station, Antarctica LTER, a member of the Long Term Ecological Research Network.\n\n## Setup\n\nFirst, we need to install the `frause` package. This can be done using the `ssc install` command. We will also need some additional commands to change colors of shemes, and create and select custom colors. Please copy the following code to your do-file, or run it from your command line.\n\n::: {#6e0b66c1 .cell execution_count=1}\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<style>div.jp-Notebook .datagrid-container {min-height: 448px; }</style>\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\ngraph size was (5.5in, 4in), is now (default, default).\n```\n:::\n:::\n\n\n::: {#195af4af .cell execution_count=2}\n``` {.stata .cell-code}\nssc install frause\nssc install color_style\nnet install colrspace, replace from(https://raw.githubusercontent.com/benjann/colrspace/master/)\nnet install palettes, replace from(https://raw.githubusercontent.com/benjann/palettes/master/)\nnet install grstyle, replace from(https://raw.githubusercontent.com/benjann/grstyle/master/)\n```\n:::\n\n\nNow, lets load the data, and set a cleaner scheme than the default. We will also set the default color scheme to `tableau`.\n\n::: {#325024aa .cell execution_count=3}\n``` {.stata .cell-code}\nset scheme white2\ncolor_style tableau\nfrause penguins, clear\n```\n:::\n\n\n## Basic plots: Scatter plot\n\nLets start with a basic Scatter plot\n\n::: {#276c94cb .cell execution_count=4}\n``` {.stata .cell-code}\ntwoway scatter flipper_length_mm body_mass_g, /// Creates a Scatter plot\n    ytitle(\"Flipper length (mm)\") ///             Sets the title for the y-axis\n    xtitle(\"Body mass (g)\") ///                   Sets the title for the x-axis\n    legend(off) scale(1.1) ///                    Set legends off, and scale the plot by 1.1 (fonts) \n    xsize(9) ysize(6) //                          Finally, setting Size of the plot  \n```\n\n::: {.cell-output .cell-output-display}\n![](stataviz5_files/figure-html/cell-5-output-1.png){fig-align='center'}\n:::\n:::\n\n\nBut we can also add some additional information to the plot. For example, we can color the points by the species of the penguin. We can change the markers, and finally, add a title and subtitle to the plot.\n\n::: {#e20eed8f .cell execution_count=5}\n``` {.stata .cell-code}\ntwoway (scatter body_mass_g flipper_length_mm if species == 1, msymbol(o) ) /// changes Symbol to a circle\n    (scatter body_mass_g flipper_length_mm if species == 2, msymbol(t) ) /// changes Symbol to a triangle, etc\n    (scatter body_mass_g flipper_length_mm if species == 3, msymbol(s) ) , /// Creates a Scatter plot by groups\n    ytitle(\"Flipper length (mm)\") ///             Sets the title for the y-axis\n    xtitle(\"Body mass (g)\") ///                   Sets the title for the x-axis\n    legend(order(1 \"Adelie\" 2 \"Chinstrap\" 3 \"Gentoo\") ring(0)) ///  Adds text to the legend  \n    title(\"Penguin size, Palmer Station LTER\", pos(11) span )  /// Adds a title to the plot             \n    subtitle(\"Flipper lengh and body mass by species\", pos(11) span )  /// Adds a title to the plot             \n    scale(1.1) xsize(9) ysize(6) //                                 Scales the plot by 1.1 (fonts) \n```\n\n::: {.cell-output .cell-output-display}\n![](stataviz5_files/figure-html/cell-6-output-1.png){fig-align='center'}\n:::\n:::\n\n\nOf course, we could also add a regression line to the plot. On top of that, I will change the colors and size of the symbols.\nFor this example, I will use different variables: Bill lenght and Flipper lenght. Changing the colors i will use `color_style`:\n\n::: {#7d75f855 .cell execution_count=6}\n``` {.stata .cell-code}\n** This line changes the color of the scheme, setting the first n colors based \n** on a list of colors, or a palette. See help colorpalette for more options\ncolor_style darkorange purple LightSeaGreen\n\ntwoway (scatter bill_length_mm flipper_length_mm if species == 1, msymbol(o) ) /// \n    (scatter bill_length_mm flipper_length_mm if species == 2, msymbol(t) ) /// \n    (scatter bill_length_mm flipper_length_mm if species == 3, msymbol(s) ) ///\n    (lfit bill_length_mm flipper_length_mm if species == 1, pstyle(p1) color(%60)) /// Creates fitted lines\n    (lfit bill_length_mm flipper_length_mm if species == 2, pstyle(p2) color(%60)) /// Need to use pstyle to keep colors\n    (lfit bill_length_mm flipper_length_mm if species == 3, pstyle(p3) color(%60)), /// consistent\n    ytitle(\"Bill length (mm)\") ///             Sets the title for the y-axis\n    xtitle(\"Flipper lenght (mm)\") ///                   Sets the title for the x-axis\n    legend(order(1 \"Adelie\" 2 \"Chinstrap\" 3 \"Gentoo\") ring(0) pos(5)) ///  Adds text to the legend  \n    title(\"Flipper and Bill length\", pos(11) span )  /// Adds a title to the plot             \n    subtitle(\"Dimensions by species\", pos(11) span )  /// Adds a title to the plot             \n    scale(1.1) xsize(9) ysize(6) // \n```\n\n::: {.cell-output .cell-output-display}\n![](stataviz5_files/figure-html/cell-7-output-1.png){fig-align='center'}\n:::\n:::\n\n\n## Basic plots: Histogram\n\n::: {#7f44b746 .cell execution_count=7}\n``` {.stata .cell-code}\nhistogram flipper_length_mm, lcolor(*.80) /// Creates a histogram, and \n    ytitle(\"Frequency\") ///             Sets the title for the y-axis\n    xtitle(\"Flipper length (mm)\") ///                   Sets the title for the x-axis\n    title(\"Penguin Flipper length\", pos(11) span )  /// Adds a title to the plot             \n    subtitle(\"Distribution of flipper length\", pos(11) span )  /// Adds a title to the plot             \n    scale(1.1) xsize(9) ysize(6) //                                 Scales the plot by 1.1 (fonts) \t                              Scales the plot by 1.1 (fonts) \n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(bin=18, start=172, width=3.2777778)\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](stataviz5_files/figure-html/cell-8-output-2.png){fig-align='center'}\n:::\n:::\n\n\nNow by color. We will need to set width and binwidth to make the plot look better.\n\n::: {#10d0b00e .cell execution_count=8}\n``` {.stata .cell-code}\ntwo (histogram flipper_length_mm if species==1, color(%50) lcolor(%0) ///\n    frequency start(170) width(2) pstyle(p1)) ///\n    (histogram flipper_length_mm if species==2, color(%50) lcolor(%0) ///\n    frequency start(170) width(2) pstyle(p2)) ///\n    (histogram flipper_length_mm if species==3, color(%50) lcolor(%0) ///\n    frequency start(170) width(2) pstyle(p3)), ///\n    ytitle(\"Frequency\") ///                             Sets the title for the y-axis\n    xtitle(\"Flipper length (mm)\") ///                   Sets the title for the x-axis\n    legend(order(1 \"Adelie\" 2 \"Chinstrap\" 3 \"Gentoo\")  ) ///  Adds text to the legend  \n    title(\"Penguin Flipper length\", pos(11) span )  /// Adds a title to the plot             \n    subtitle(\"Distribution of flipper length\", pos(11) span )  /// Adds a title to the plot             \n    scale(1.1) xsize(9) ysize(6) //                                 Scales the plot by 1.1 \n```\n\n::: {.cell-output .cell-output-display}\n![](stataviz5_files/figure-html/cell-9-output-1.png){fig-align='center'}\n:::\n:::\n\n\n## Basic plots: scatter plot by\n\n::: {#30e1c38d .cell execution_count=9}\n``` {.stata .cell-code}\ncolor_style darkorange   LightSeaGreen\n\ntwo (scatter body_mass_g flipper_length_mm if sex==1) ///\n    (scatter body_mass_g flipper_length_mm if sex==2), ///\n    by(species, col(3) note(\"\")  ///\n    title(\"Penguin Flipper and Body Mass\", pos(11) span )  /// Adds a title to the plot             \n    subtitle(\"Dimensions for Male and Female\", pos(11) span ))  /// Adds a title to the plot \n    legend(order(1 \"Female\" 2 \"Male\") cols(2) ) ///\n    ytitle(\"Body Mass (g)\") ///             Sets the title for the y-axis\n    xtitle(\"Flipper lenght (mm)\") ///                   Sets the title for the x-axis\n    scale(1.1) xsize(9) ysize(6) //  \n```\n\n::: {.cell-output .cell-output-display}\n![](stataviz5_files/figure-html/cell-10-output-1.png){fig-align='center'}\n:::\n:::\n\n\n## Conclusions\n\nSo this was just for fun, as I wanted to produce this, and use an extra fix of `nbstata`\nEnjoy\n\n",
    "supporting": [
      "stataviz5_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}